<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>papercheck • papercheck</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Fira_Code-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="papercheck">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-160147578-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-160147578-1');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">papercheck</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9042</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/papercheck.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/scienceverse/papercheck/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>papercheck</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/scienceverse/papercheck/blob/HEAD/vignettes/papercheck.Rmd" class="external-link"><code>vignettes/papercheck.Rmd</code></a></small>
      <div class="d-none name"><code>papercheck.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of papercheck from <a href="https://github.com/scienceverse/papercheck" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"scienceverse/papercheck"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/scienceverse/papercheck" class="external-link">papercheck</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">*******************************************</span></span></span>
<span><span class="co">#&gt; ✅ Welcome to PaperCheck</span></span>
<span><span class="co">#&gt; For support and examples visit:</span></span>
<span><span class="co">#&gt; https://scienceverse.github.io/papercheck/</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ⚠️ This is alpha software; please check any</span></span>
<span><span class="co">#&gt; results. False positives and negatives will</span></span>
<span><span class="co">#&gt; occur at unknown rates.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">*******************************************</span></span></span></code></pre>
<p>You can launch an interactive shiny app version of the code below
with:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/papercheck_app.html">papercheck_app</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="load-from-pdf">Load from PDF<a class="anchor" aria-label="anchor" href="#load-from-pdf"></a>
</h3>
<p>The function <code><a href="../reference/pdf2grobid.html">pdf2grobid()</a></code> can read PDF files and save
them in the <a href="https://tei-c.org/" class="external-link">TEI</a> format created by <a href="https://grobid.readthedocs.io/" class="external-link">grobid</a>. This requires an
internet connection and takes a few seconds per paper, so should only be
done once and the results saved for later use.</p>
<p>If the server is unavailable, you can <a href="https://huggingface.co/spaces/kermitt2/grobid" class="external-link">use a grobid web
interface</a>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pdf_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/demopdf.html">demopdf</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">xml_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pdf2grobid.html">pdf2grobid</a></span><span class="op">(</span><span class="va">pdf_file</span><span class="op">)</span></span></code></pre></div>
<p>You can set up your own local grobid server following instructions
from <a href="https://grobid.readthedocs.io/" class="external-link uri">https://grobid.readthedocs.io/</a>. The easiest way is to
use Docker.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--rm</span> <span class="at">--init</span> <span class="at">--ulimit</span> core=0 <span class="at">-p</span> 8070:8070 lfoppiano/grobid:0.8.1</span></code></pre></div>
<p>Then you can set your grobid_url to the local path <a href="http://localhost:8070" class="external-link uri">http://localhost:8070</a>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xml_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pdf2grobid.html">pdf2grobid</a></span><span class="op">(</span><span class="va">pdf_file</span>, grobid_url <span class="op">=</span> <span class="st">"http://localhost:8070"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="load-from-xml">Load from XML<a class="anchor" aria-label="anchor" href="#load-from-xml"></a>
</h3>
<p>The function <code><a href="../reference/read_grobid.html">read_grobid()</a></code> can read XML files parsed by
grobid.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">paper</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_grobid.html">read_grobid</a></span><span class="op">(</span><span class="va">xml_file</span><span class="op">)</span></span></code></pre></div>
<p>The function <code><a href="../reference/read_cermine.html">read_cermine()</a></code> can read XML files parsed by
<a href="http://cermine.ceon.pl" class="external-link">cermine</a>. This is not as good as
grobid at parsing papers, and omits figure and table captions.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cermine_xml_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"psychsci/0956797620955209.cermine.xml"</span>,</span>
<span>                                package <span class="op">=</span> <span class="st">"papercheck"</span><span class="op">)</span></span>
<span><span class="va">paper</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_cermine.html">read_cermine</a></span><span class="op">(</span><span class="va">cermine_xml_file</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="load-from-non-pdf-document">Load from non-PDF document<a class="anchor" aria-label="anchor" href="#load-from-non-pdf-document"></a>
</h3>
<p>To take advantage of grobid’s ability to parse references and other
aspects of papers, for now the best way is to convert your papers to
PDF. However, papercheck can read in plain text from a character object
or text/docx file with <code><a href="../reference/read_text.html">read_text()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text</span> <span class="op">&lt;-</span> <span class="st">"Abstract</span></span>
<span><span class="st"></span></span>
<span><span class="st">This is my very short paper. It has two sentences."</span></span>
<span><span class="va">shortpaper</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_text.html">read_text</a></span><span class="op">(</span><span class="va">text</span>, id <span class="op">=</span> <span class="st">"shortpaper"</span><span class="op">)</span></span>
<span><span class="va">shortpaper</span><span class="op">$</span><span class="va">full_text</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 7</span></span></span>
<span><span class="co">#&gt;   text                         section  header     div     p     s id        </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Abstract                     abstract Abstract     1     0     1 shortpaper</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> This is my very short paper. abstract Abstract     1     1     1 shortpaper</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> It has two sentences.        abstract Abstract     1     1     2 shortpaper</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">filename</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/to_err_is_human.docx"</span>, </span>
<span>                        package <span class="op">=</span> <span class="st">"papercheck"</span><span class="op">)</span></span>
<span><span class="va">paper_from_doc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_text.html">read_text</a></span><span class="op">(</span><span class="va">filename</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="search-text">Search Text<a class="anchor" aria-label="anchor" href="#search-text"></a>
</h2>
<p>You can access a parsed table of the full text of the paper via
<code>paper$full_text</code>, but you may find it more convenient to use
the function <code><a href="../reference/search_text.html">search_text()</a></code>. The defaults return a data
table of each sentence, with the section type, header, div, paragraph
and sentence numbers, and file name. (The section type is a best guess
from the headers, so may not always be accurate.)</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">paper</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="72%">
<col width="4%">
<col width="10%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="left">text</th>
<th align="left">section</th>
<th align="left">header</th>
<th align="right">div</th>
<th align="right">p</th>
<th align="right">s</th>
<th align="left">id</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">This paper demonstrates some good and poor practices
for use with the {papercheck} R package and Shiny app.</td>
<td align="left">abstract</td>
<td align="left">Abstract</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">to_err_is_human.xml</td>
</tr>
<tr class="even">
<td align="left">Although intentional dishonestly might be a successful
way to boost creativity (Gino &amp; Wiltermuth, 2014), it is safe to say
most mistakes researchers make are unintentional.</td>
<td align="left">intro</td>
<td align="left">Introduction</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">to_err_is_human.xml</td>
</tr>
<tr class="odd">
<td align="left">In this study we examine whether automated checks
reduce the amount of errors that researchers make in scientific
manuscripts.</td>
<td align="left">method</td>
<td align="left">Method and Participants</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">to_err_is_human.xml</td>
</tr>
<tr class="even">
<td align="left">All data needed to reproduce these analyses is
available from <a href="https://osf.io/5tbm9" class="external-link uri">https://osf.io/5tbm9</a> and code is available from <a href="https://osf.io/629bx" class="external-link uri">https://osf.io/629bx</a>.</td>
<td align="left">results</td>
<td align="left">Results</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">to_err_is_human.xml</td>
</tr>
<tr class="odd">
<td align="left">It seems automated tools can help prevent errors by
providing researchers with feedback about potential mistakes, and
researchers feel the app is useful.</td>
<td align="left">discussion</td>
<td align="left">Discussion</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">to_err_is_human.xml</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="pattern">Pattern<a class="anchor" aria-label="anchor" href="#pattern"></a>
</h3>
<p>You can search for a specific word or phrase by setting the
<code>pattern</code> argument. The pattern is a regex string by default;
set <code>fixed = TRUE</code> if you want to find exact text
matches.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">paper</span>, pattern <span class="op">=</span> <span class="st">"papercheck"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="67%">
<col width="5%">
<col width="8%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left">text</th>
<th align="left">section</th>
<th align="left">header</th>
<th align="right">div</th>
<th align="right">p</th>
<th align="right">s</th>
<th align="left">id</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">This paper demonstrates some good and poor practices
for use with the {papercheck} R package and Shiny app.</td>
<td align="left">abstract</td>
<td align="left">Abstract</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">to_err_is_human.xml</td>
</tr>
<tr class="even">
<td align="left">In this study we examine the usefulness of Papercheck
to improve best practices.</td>
<td align="left">intro</td>
<td align="left">Introduction</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="left">to_err_is_human.xml</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="section">Section<a class="anchor" aria-label="anchor" href="#section"></a>
</h3>
<p>Set <code>section</code> to a vector of the sections to search
in.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">paper</span>, <span class="st">"papercheck"</span>, </span>
<span>                    section <span class="op">=</span> <span class="st">"abstract"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="69%">
<col width="5%">
<col width="5%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left">text</th>
<th align="left">section</th>
<th align="left">header</th>
<th align="right">div</th>
<th align="right">p</th>
<th align="right">s</th>
<th align="left">id</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">This paper demonstrates some good and poor practices
for use with the {papercheck} R package and Shiny app.</td>
<td align="left">abstract</td>
<td align="left">Abstract</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">to_err_is_human.xml</td>
</tr></tbody>
</table>
</div>
<div class="section level3">
<h3 id="return">Return<a class="anchor" aria-label="anchor" href="#return"></a>
</h3>
<p>Set <code>return</code> to one of “sentence”, “paragraph”, “section”,
or “match” to control what gets returned.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">paper</span>, <span class="st">"papercheck"</span>, </span>
<span>                    section <span class="op">=</span> <span class="st">"intro"</span>, </span>
<span>                    return <span class="op">=</span> <span class="st">"paragraph"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="90%">
<col width="1%">
<col width="2%">
<col width="0%">
<col width="0%">
<col width="0%">
<col width="3%">
</colgroup>
<thead><tr class="header">
<th align="left">text</th>
<th align="left">section</th>
<th align="left">header</th>
<th align="right">div</th>
<th align="right">p</th>
<th align="left">s</th>
<th align="left">id</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">Although intentional dishonestly might be a successful
way to boost creativity (Gino &amp; Wiltermuth, 2014), it is safe to say
most mistakes researchers make are unintentional. From a human factors
perspective, human error is a symptom of a poor design (Smithy, 2020).
Automation can be use to check for errors in scientific manuscripts, and
inform authors about possible corrections. In this study we examine the
usefulness of Papercheck to improve best practices.</td>
<td align="left">intro</td>
<td align="left">Introduction</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="left">to_err_is_human.xml</td>
</tr></tbody>
</table>
</div>
<div class="section level3">
<h3 id="regex-matches">Regex matches<a class="anchor" aria-label="anchor" href="#regex-matches"></a>
</h3>
<p>You can also return just the matched text from a regex search by
setting <code>return = "match"</code>. The extra <code>...</code>
arguments in <code><a href="../reference/search_text.html">search_text()</a></code> are passed to
<code><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep()</a></code>, so <code>perl = TRUE</code> allows you to use more
complex regex, like below.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pattern</span> <span class="op">&lt;-</span> <span class="st">"[a-zA-Z]\\S*\\s*(=|&lt;)\\s*[0-9\\.,-]*\\d"</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">paper</span>, <span class="va">pattern</span>, return <span class="op">=</span> <span class="st">"match"</span>, perl <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">text</th>
<th align="left">section</th>
<th align="left">header</th>
<th align="right">div</th>
<th align="right">p</th>
<th align="right">s</th>
<th align="left">id</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">M = 9.12</td>
<td align="left">results</td>
<td align="left">Results</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">to_err_is_human.xml</td>
</tr>
<tr class="even">
<td align="left">M = 10.9</td>
<td align="left">results</td>
<td align="left">Results</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">to_err_is_human.xml</td>
</tr>
<tr class="odd">
<td align="left">t(97.7) = 2.9</td>
<td align="left">results</td>
<td align="left">Results</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">to_err_is_human.xml</td>
</tr>
<tr class="even">
<td align="left">p = 0.005</td>
<td align="left">results</td>
<td align="left">Results</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">to_err_is_human.xml</td>
</tr>
<tr class="odd">
<td align="left">M = 5.06</td>
<td align="left">results</td>
<td align="left">Results</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">to_err_is_human.xml</td>
</tr>
<tr class="even">
<td align="left">M = 4.5</td>
<td align="left">results</td>
<td align="left">Results</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">to_err_is_human.xml</td>
</tr>
<tr class="odd">
<td align="left">t(97.2) = -1.96</td>
<td align="left">results</td>
<td align="left">Results</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">to_err_is_human.xml</td>
</tr>
<tr class="even">
<td align="left">p = 0.152</td>
<td align="left">results</td>
<td align="left">Results</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">to_err_is_human.xml</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="expand-text">Expand Text<a class="anchor" aria-label="anchor" href="#expand-text"></a>
</h3>
<p>You can expand the text returned by <code><a href="../reference/search_text.html">search_text()</a></code> or a
module with <code><a href="../reference/expand_text.html">expand_text()</a></code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">marginal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">paper</span>, <span class="st">"marginal"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/expand_text.html">expand_text</a></span><span class="op">(</span><span class="va">paper</span>, plus <span class="op">=</span> <span class="fl">1</span>, minus <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">marginal</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"text"</span>, <span class="st">"expanded"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">#&gt;   text                                                                  expanded</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> <span style="color: #949494;">"</span>The paper shows examples of (1) open and closed OSF links; (2) cita… <span style="color: #949494;">"</span>All da…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> <span style="color: #949494;">"</span>On average researchers in the experimental condition found the app … <span style="color: #949494;">"</span>On ave…</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="large-language-models">Large Language Models<a class="anchor" aria-label="anchor" href="#large-language-models"></a>
</h2>
<p>You can query the extracted text of papers with LLMs using <a href="https://console.groq.com/docs/" class="external-link">groq</a>.</p>
<p><a href="https://groq.com" target="_blank" rel="noopener noreferrer" class="external-link">
<img src="https://groq.com/wp-content/uploads/2024/03/PBG-mark1-color.svg" alt="Powered by Groq for fast inference."></a></p>
<div class="section level3">
<h3 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h3>
<p>You will need to get your own API key from <a href="https://console.groq.com/keys" class="external-link uri">https://console.groq.com/keys</a>. To avoid having to type
it out, add it to the .Renviron file in the following format (you can
use <code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_r_environ()</a></code> to access the .Renviron
file).</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="va">GROQ_GPT_KEY</span><span class="op">=</span><span class="st">"sk-proj-abcdefghijklmnopqrs0123456789ABCDEFGHIJKLMNOPQRS"</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># useful if you aren't sure where this file is</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">edit_r_environ</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>You can get or set the default LLM model with
<code><a href="../reference/llm_model.html">llm_model()</a></code> and access a list of the current available
models using <code><a href="../reference/llm_model_list.html">llm_model_list()</a></code>.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="37%">
<col width="30%">
<col width="13%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">id</th>
<th align="left">owned_by</th>
<th align="left">created</th>
<th align="right">context_window</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">mistral-saba-24b</td>
<td align="left">Mistral AI</td>
<td align="left">2025-02-19</td>
<td align="right">32768</td>
</tr>
<tr class="even">
<td align="left">qwen-2.5-coder-32b</td>
<td align="left">Alibaba Cloud</td>
<td align="left">2025-02-14</td>
<td align="right">131072</td>
</tr>
<tr class="odd">
<td align="left">deepseek-r1-distill-qwen-32b</td>
<td align="left">DeepSeek / Alibaba Cloud</td>
<td align="left">2025-02-07</td>
<td align="right">131072</td>
</tr>
<tr class="even">
<td align="left">qwen-2.5-32b</td>
<td align="left">Alibaba Cloud</td>
<td align="left">2025-02-05</td>
<td align="right">131072</td>
</tr>
<tr class="odd">
<td align="left">deepseek-r1-distill-llama-70b</td>
<td align="left">DeepSeek / Meta</td>
<td align="left">2025-01-26</td>
<td align="right">131072</td>
</tr>
<tr class="even">
<td align="left">llama-3.3-70b-specdec</td>
<td align="left">Meta</td>
<td align="left">2024-12-06</td>
<td align="right">8192</td>
</tr>
<tr class="odd">
<td align="left">llama-3.3-70b-versatile</td>
<td align="left">Meta</td>
<td align="left">2024-12-06</td>
<td align="right">32768</td>
</tr>
<tr class="even">
<td align="left">llama-3.2-3b-preview</td>
<td align="left">Meta</td>
<td align="left">2024-09-25</td>
<td align="right">8192</td>
</tr>
<tr class="odd">
<td align="left">llama-3.2-1b-preview</td>
<td align="left">Meta</td>
<td align="left">2024-09-25</td>
<td align="right">8192</td>
</tr>
<tr class="even">
<td align="left">llama-guard-3-8b</td>
<td align="left">Meta</td>
<td align="left">2023-09-03</td>
<td align="right">8192</td>
</tr>
<tr class="odd">
<td align="left">mixtral-8x7b-32768</td>
<td align="left">Mistral AI</td>
<td align="left">2023-09-03</td>
<td align="right">32768</td>
</tr>
<tr class="even">
<td align="left">llama-3.1-8b-instant</td>
<td align="left">Meta</td>
<td align="left">2023-09-03</td>
<td align="right">131072</td>
</tr>
<tr class="odd">
<td align="left">llama3-8b-8192</td>
<td align="left">Meta</td>
<td align="left">2023-09-03</td>
<td align="right">8192</td>
</tr>
<tr class="even">
<td align="left">gemma2-9b-it</td>
<td align="left">Google</td>
<td align="left">2023-09-03</td>
<td align="right">8192</td>
</tr>
<tr class="odd">
<td align="left">llama3-70b-8192</td>
<td align="left">Meta</td>
<td align="left">2023-09-03</td>
<td align="right">8192</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="llm-queries">LLM Queries<a class="anchor" aria-label="anchor" href="#llm-queries"></a>
</h3>
<p>You can ask an LLM to process text. Use <code><a href="../reference/search_text.html">search_text()</a></code>
first to narrow down the text into what you want to query. Below, we
returned the first two papers’ introduction sections, and returned the
full section. Then we asked an LLM “What is the hypothesis of this
study?”.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hypotheses</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">papers</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, </span>
<span>                          section <span class="op">=</span> <span class="st">"intro"</span>, </span>
<span>                          return <span class="op">=</span> <span class="st">"section"</span><span class="op">)</span></span>
<span><span class="va">query</span> <span class="op">&lt;-</span> <span class="st">"What is the hypothesis of this study? Answer as briefly as possible."</span></span>
<span><span class="va">llm_hypo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/llm.html">llm</a></span><span class="op">(</span><span class="va">hypotheses</span>, <span class="va">query</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="6%">
<col width="93%">
</colgroup>
<thead><tr class="header">
<th align="left">id</th>
<th align="left">answer</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">eyecolor.xml</td>
<td align="left">The hypothesis of this study is that humans exhibit
positive sexual imprinting, where individuals choose partners with
physical characteristics similar to those of their opposite-sex
parent.</td>
</tr>
<tr class="even">
<td align="left">incest.xml</td>
<td align="left">The hypothesis is that moral opposition to third-party
sibling incest is greater among individuals with other-sex siblings than
among individuals with same-sex siblings.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="rate-limiting">Rate Limiting<a class="anchor" aria-label="anchor" href="#rate-limiting"></a>
</h3>
<p>Remember, the <code><a href="../reference/llm.html">llm()</a></code> function makes a separate query for
each row in a data frame from <code><a href="../reference/search_text.html">search_text()</a></code>. Free GROQ
accounts are rate limited, so we set the default limits to 30 queries,
but you can change this:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/llm_max_calls.html">llm_max_calls</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span></span></code></pre></div>
<p>If you hit your rate limit, the <code><a href="../reference/llm.html">llm()</a></code> function will add
a short delay between calls, so don’t worry if you notice the query
speed slowing down after the first 30 calls.</p>
</div>
</div>
<div class="section level2">
<h2 id="batch-processing">Batch Processing<a class="anchor" aria-label="anchor" href="#batch-processing"></a>
</h2>
<p>The functions <code><a href="../reference/pdf2grobid.html">pdf2grobid()</a></code> and
<code><a href="../reference/read_grobid.html">read_grobid()</a></code> also work on a folder of files, returning a
list of XML file paths or paper objects, respectively. The functions
<code><a href="../reference/search_text.html">search_text()</a></code>, <code><a href="../reference/expand_text.html">expand_text()</a></code> and
<code><a href="../reference/llm.html">llm()</a></code> also work on a list of paper objects.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grobid_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/demodir.html">demodir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">papers</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_grobid.html">read_grobid</a></span><span class="op">(</span><span class="va">grobid_dir</span><span class="op">)</span></span>
<span></span>
<span><span class="va">hypotheses</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">papers</span>, <span class="st">"hypothesi"</span>, </span>
<span>                          section <span class="op">=</span> <span class="st">"intro"</span>, </span>
<span>                          return <span class="op">=</span> <span class="st">"paragraph"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="modules">Modules<a class="anchor" aria-label="anchor" href="#modules"></a>
</h2>
<p>Papercheck is designed modularly, so you can add modules to check for
anything. It comes with a set of pre-defined modules, and we hope people
will share more modules.</p>
<div class="section level3">
<h3 id="module-list">Module List<a class="anchor" aria-label="anchor" href="#module-list"></a>
</h3>
<p>You can see the list of built-in modules with the function below.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/module_list.html">module_list</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;  * all_p_values: List all p-values in the text, returning the matched text (e.g., 'p = 0.04')</span></span>
<span><span class="co">#&gt; and document location in a table.</span></span>
<span><span class="co">#&gt;  * all_urls: List all the URLs in the main text.</span></span>
<span><span class="co">#&gt;  * effect_size: Detect t-tests and F-tests  with missing effect sizes</span></span>
<span><span class="co">#&gt;  * exact_p: List any p-values reported with insufficient precision (e.g., p &lt; .05 or p = n.s.)</span></span>
<span><span class="co">#&gt;  * marginal: List all sentences that describe an effect as 'marginally significant'.</span></span>
<span><span class="co">#&gt;  * osf_check: List all OSF links and whether they are open, closed, or do not exist.</span></span>
<span><span class="co">#&gt;  * ref_consistency: Check if all references are cited and all citations are referenced</span></span>
<span><span class="co">#&gt;  * retractionwatch: Flag any cited papers in the RetractionWatch database</span></span>
<span><span class="co">#&gt;  * statcheck: Check consistency of p-values and test statistics</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="running-modules">Running modules<a class="anchor" aria-label="anchor" href="#running-modules"></a>
</h3>
<p>To run a built-in module on a paper, you can reference it by
name.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/module_run.html">module_run</a></span><span class="op">(</span><span class="va">paper</span>, <span class="st">"all_p_values"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">text</th>
<th align="left">section</th>
<th align="left">header</th>
<th align="right">div</th>
<th align="right">p</th>
<th align="right">s</th>
<th align="left">id</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">p = 0.005</td>
<td align="left">results</td>
<td align="left">Results</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">to_err_is_human.xml</td>
</tr>
<tr class="even">
<td align="left">p = 0.152</td>
<td align="left">results</td>
<td align="left">Results</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">to_err_is_human.xml</td>
</tr>
<tr class="odd">
<td align="left">p &gt; .05</td>
<td align="left">results</td>
<td align="left">Results</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="left">to_err_is_human.xml</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="creating-modules">Creating modules<a class="anchor" aria-label="anchor" href="#creating-modules"></a>
</h3>
<p>You can create your own modules using R code. Modules can also
contain instructions for reporting, to give “traffic lights” for whether
a check passed or failed, and to include appropriate text feedback in a
report. See the <a href="modules.html">modules vignette</a> for more
details.</p>
</div>
</div>
<div class="section level2">
<h2 id="reports">Reports<a class="anchor" aria-label="anchor" href="#reports"></a>
</h2>
<p>You can generate a report from any set of modules. The default set is
<code>c("exact_p", "marginal", "effect_size", "osf_check", "retractionwatch", "ref_consistency")</code></p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/report.html">report</a></span><span class="op">(</span><span class="va">paper</span>, output_format <span class="op">=</span> <span class="st">"qmd"</span><span class="op">)</span></span></code></pre></div>
<p>See the <a href="report-example.html">example report</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lisa DeBruine, Daniel Lakens.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
