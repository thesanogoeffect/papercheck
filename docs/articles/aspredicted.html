<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Retrieving Planned Sample Sizes from AsPredicted Preregistrations • papercheck</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Fira_Code-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieving Planned Sample Sizes from AsPredicted Preregistrations">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-160147578-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-160147578-1');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">papercheck</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9046</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/papercheck.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/scienceverse/papercheck/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Retrieving Planned Sample Sizes from AsPredicted Preregistrations</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/scienceverse/papercheck/blob/HEAD/vignettes/articles/aspredicted.Rmd" class="external-link"><code>vignettes/articles/aspredicted.Rmd</code></a></small>
      <div class="d-none name"><code>aspredicted.Rmd</code></div>
    </div>

    
    
<p>It is increasingly common for researchers to preregister their
studies <span class="citation">(Spitzer and Mueller 2023; Imai et al.
2025)</span>. As it is a new practice, and not all researchers are
trained in how to preregister, it is not surprising that the quality of
preregistration is not always sufficient to allow others to identify
opportunistic flexibility in the data analysis <span class="citation">(Akker et al. 2024)</span>. Reviewers could check
whether researchers adhere to the preregistration, but this requires
some effort. Automation can provide a partial solution be making
information more easily available, and perhaps even performing automated
checks.</p>
<p>Here we demonstrate how <a href="https://scienceverse.github.io/papercheck/">Papercheck</a>, our
software to perform automated checks on scientific manuscripts, can also
retrieve the content of a preregistration. The preregistration can then
be presented alongside the relevant information in the manuscript. This
makes it easier for peer reviewers to compare the information.</p>
<p>We will illustrate code that automatically retrieves and presents
preregistrations in this blog post. We focus on AsPredicted
preregistrations. Their structured format makes it especially easy to
retrieve information, but the same can be achieved for OSF
preregistrations, especially those that use a template. We can easily
search for AsPredicted links in all 250 open access papers from
psychological science. The Papercheck package conveniently includes
these in xml format in the <code>psychsci</code> object.</p>
<div class="section level2">
<h2 id="find-aspredicted-links">Find AsPredicted Links<a class="anchor" aria-label="anchor" href="#find-aspredicted-links"></a>
</h2>
<p>Extracting links is a bit trickier than just searching for
“aspredicted.org”, so we provide a convenient function for extracting
them from papers: <code><a href="../reference/aspredicted_links.html">aspredicted_links()</a></code>. It cleans up the
links when they are incorrectly formatted, such as splitting “<a href="https://aspredicted.org/blind.php?x=nq4xa3" class="external-link uri">https://aspredicted.org/blind.php?x=nq4xa3</a>” across two
sentences at the question mark.</p>
<p>This function returns a table with a row for each link found that
indicates the location of the link in each paper. Many papers include
the same link in multiple places, so we will just show you the unique
links here, returned in the “text” column.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">links</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aspredicted_links.html">aspredicted_links</a></span><span class="op">(</span><span class="va">psychsci</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">links</span><span class="op">$</span><span class="va">text</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "https://aspredicted.org/ve2qn.pdf"         </span></span>
<span><span class="co">#&gt;  [2] "https://aspredicted.org/mq97g.pdf"         </span></span>
<span><span class="co">#&gt;  [3] "https://aspredicted.org/4gf64.pdf"         </span></span>
<span><span class="co">#&gt;  [4] "https://aspredicted.org/8a6ta.pdf"         </span></span>
<span><span class="co">#&gt;  [5] "https://aspredicted.org/vp4rg.pdf"         </span></span>
<span><span class="co">#&gt;  [6] "https://aspredicted.org/3kq9y.pdf"         </span></span>
<span><span class="co">#&gt;  [7] "https://aspredicted.org/rz98j.pdf"         </span></span>
<span><span class="co">#&gt;  [8] "https://aspredicted.org/z97us.pdf"         </span></span>
<span><span class="co">#&gt;  [9] "https://aspredicted.org/h9xm3.pdf"         </span></span>
<span><span class="co">#&gt; [10] "https://aspredicted.org/bj9er.pdf"         </span></span>
<span><span class="co">#&gt; [11] "https://aspredicted.org/my5jk.pdf"         </span></span>
<span><span class="co">#&gt; [12] "https://aspredicted.org/5xe8i.pdf"         </span></span>
<span><span class="co">#&gt; [13] "https://aspredicted.org/ak97v.pdf"         </span></span>
<span><span class="co">#&gt; [14] "https://aspredicted.org/p4ci6.pdf"         </span></span>
<span><span class="co">#&gt; [15] "https://aspredicted.org/iv9tb.pdf"         </span></span>
<span><span class="co">#&gt; [16] "https://aspredicted.org/dp8r5.pdf"         </span></span>
<span><span class="co">#&gt; [17] "https://aspredicted.org/Y2F_6B7"           </span></span>
<span><span class="co">#&gt; [18] "https://aspredicted.org/2YK_D6R"           </span></span>
<span><span class="co">#&gt; [19] "https://aspredicted.org/MPG_T3C"           </span></span>
<span><span class="co">#&gt; [20] "https://aspredicted.org/G68_GBZ"           </span></span>
<span><span class="co">#&gt; [21] "https://aspredicted.org/9SR_7BC"           </span></span>
<span><span class="co">#&gt; [22] "https://aspredicted.org/6D7_FVX"           </span></span>
<span><span class="co">#&gt; [23] "https://aspredicted.org/KD5_7LF"           </span></span>
<span><span class="co">#&gt; [24] "https://aspredicted.org/6tv5v.pdf"         </span></span>
<span><span class="co">#&gt; [25] "https://aspredicted.org/qs7zz.pdf"         </span></span>
<span><span class="co">#&gt; [26] "https://aspredicted.org/4mk6i.pdf"         </span></span>
<span><span class="co">#&gt; [27] "https://aspredicted.org/z5k26.pdf"         </span></span>
<span><span class="co">#&gt; [28] "https://aspredicted.org/wd3pm.pdf"         </span></span>
<span><span class="co">#&gt; [29] "https://aspredicted.org/LVH_7KX"           </span></span>
<span><span class="co">#&gt; [30] "https://aspredicted.org/LZQ_DXY"           </span></span>
<span><span class="co">#&gt; [31] "https://aspredicted.org/6X6_XZW"           </span></span>
<span><span class="co">#&gt; [32] "https://aspredicted.org/blind.php?x=nq4xa3"</span></span>
<span><span class="co">#&gt; [33] "https://aspredicted.org/blind.php?"        </span></span>
<span><span class="co">#&gt; [34] "https://aspredicted.org/blind.php?x=772w3a"</span></span>
<span><span class="co">#&gt; [35] "https://aspredicted.org/blind.php?x=55km72"</span></span>
<span><span class="co">#&gt; [36] "https://aspredicted.org/blind.php?x=yv9c2a"</span></span>
<span><span class="co">#&gt; [37] "https://aspredicted.org/blind.php?x=4xe5ih"</span></span>
<span><span class="co">#&gt; [38] "https://aspredicted.org/blind.php?x=pk8ff3"</span></span>
<span><span class="co">#&gt; [39] "https://aspredicted.org/sn9xs.pdf"         </span></span>
<span><span class="co">#&gt; [40] "https://aspredicted.org/vh8kg.pdf"         </span></span>
<span><span class="co">#&gt; [41] "https://aspredicted.org/ay3yk.pdf"         </span></span>
<span><span class="co">#&gt; [42] "https://aspredicted.org/jz2nc.pdf"         </span></span>
<span><span class="co">#&gt; [43] "https://aspredicted.org/a2wc9.pdf"         </span></span>
<span><span class="co">#&gt; [44] "https://aspredicted.org/PD5_KKS"           </span></span>
<span><span class="co">#&gt; [45] "https://aspredicted.org/9PG_LTT"           </span></span>
<span><span class="co">#&gt; [46] "https://aspredicted.org/M3P_X3P"           </span></span>
<span><span class="co">#&gt; [47] "https://aspredicted.org/H53_M3P"           </span></span>
<span><span class="co">#&gt; [48] "https://aspredicted.org/CQW_DTT"           </span></span>
<span><span class="co">#&gt; [49] "https://aspredicted.org/PW5_5VT"           </span></span>
<span><span class="co">#&gt; [50] "https://aspredicted.org/sq22k.pdf"         </span></span>
<span><span class="co">#&gt; [51] "https://aspredicted.org/u53e3.pdf"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="retrieve-link-info">Retrieve Link Info<a class="anchor" aria-label="anchor" href="#retrieve-link-info"></a>
</h2>
<p>We can then use the function <code><a href="../reference/aspredicted_retrieve.html">aspredicted_retrieve()</a></code> to
get structured information from AsPredicted. You can try to run the
function on all 51 links above, but AsPredicted will eventually make you
complete a captcha before each access (we’re working on a way to log
into the site to prevent this). But for demonstration purposes, let’s
just look at one paper.</p>
<p>Below we provide an example where we analyze the paper “<a href="https://journals.sagepub.com/doi/10.1177/09567976221082938" class="external-link">The
Evolution of Cognitive Control in Lemurs</a>”, which contains a single
preregistration on AsPredicted.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">paper</span> <span class="op">&lt;-</span> <span class="va">psychsci</span><span class="op">$</span><span class="va">`09567976221082938`</span></span>
<span></span>
<span><span class="va">links</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aspredicted_links.html">aspredicted_links</a></span><span class="op">(</span><span class="va">paper</span><span class="op">)</span></span>
<span></span>
<span><span class="va">prereg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aspredicted_retrieve.html">aspredicted_retrieve</a></span><span class="op">(</span><span class="va">links</span><span class="op">)</span></span>
<span><span class="co">#&gt; Starting AsPredicted retrieval for 1 files...</span></span>
<span><span class="co">#&gt; * Retrieving info from https://aspredicted.org/iv9tb.pdf...</span></span>
<span><span class="co">#&gt; ...AsPredicted retrieval complete!</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get just the AsPredicted columns</span></span>
<span><span class="va">cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">prereg</span><span class="op">)</span></span>
<span><span class="va">ap_cols</span> <span class="op">&lt;-</span> <span class="va">cols</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^AP_"</span>, <span class="va">cols</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co"># transpose for easier reading</span></span>
<span><span class="va">prereg</span><span class="op">[</span><span class="fl">1</span>, <span class="va">ap_cols</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;                  [,1]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </span></span>
<span><span class="co">#&gt; AP_title         "Lemur executive function"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     </span></span>
<span><span class="co">#&gt; AP_authors       NA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             </span></span>
<span><span class="co">#&gt; AP_created       "2019/06/06 - 11:19 AM (PT)"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </span></span>
<span><span class="co">#&gt; AP_data          "No, no data have been collected for this study yet."                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </span></span>
<span><span class="co">#&gt; AP_hypotheses    "Do differences in species’ socio-ecology predict variation across different aspects of executive function? How are different components of executive function related across individuals in these species?"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </span></span>
<span><span class="co">#&gt; AP_key_dv        "For each individual, we will take measures of their cognitive ability using a cognitive battery comprising 7 experimental tasks. \r\n1.  Novel object task. Lemurs will be presented with a series of novel items (baseline, person, stationary object, moving object). For each item, we will measure lemurs’ latency to approach and their interest in each item.\r\n2. Quantity discrimination task. Lemurs will make choices between smaller and larger pieces of food. We will measure choices for the larger piece.\r\n3. Persistence task. Lemurs will be presented with a piece of food in a box that is impossible to access. We will measure how many times and for how long subjects interact with the box.\r\n4. Temporal discounting task. Lemurs will be presented with a series of choices between a smaller piece of food immediately available and a larger piece of the same food available after a delay. We will measure their choices for the larger delayed option.\r\n5. A-not-B error task. Lemurs will be first familiarized with finding food at a container in one location (A), and then in the test trial visibly see the food moved from A to a new container (B). We will measure lemurs’ choices for the correct location (B).\r\n6. Working memory task. Lemurs will see the experimenter hide food under one of 3 identical containers; after a 5s delay with occlusion, lemurs can choose one of the cups. We will measure their choices for the correct location.\r\n7. Reversal learning task. Lemurs will be presented with two containers (different colors and locations). They will first learn that one container provides a food reward (whereas the other is always empty). Once they learn this, the reward contingencies will be switched in the test trials. We will measure responses for the correct option in the learning and test trials."</span></span>
<span><span class="co">#&gt; AP_conditions    "This study does not have conditions: all individuals will complete the same tasks in the same order to assess species-level and individual-level variation in these cognitive abilities."                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     </span></span>
<span><span class="co">#&gt; AP_analyses      "First, we will examine whether differences in species’ socio-ecology predict variation in subjects’ performance in a battery of cognitive tests that tap into several component executive functions. To do this, we will use generalized linear mixed models to analyze species’ performance in each separate task. For each task, the dependent variable will be correct choices in that task, and the test predictor will be species. We will include subject ID as a random factor, and control for age, sex and trial number in models as relevant. Across analyses, we will compare the fit of different models using likelihood-ratio tests. In addition, we will also examine each individual’s performance across the cognitive tasks, to examine whether performance on a given cognitive task predicts performance in other tasks. To do so we will first use pairwise bivariate correlations across all individuals as well as partitioning by species. If there were significant age-related variation in cognitive performance in tasks in the first phase of analyses, we will also use linear regressions accounting for age. Second, we will use a factor analysis to detect whether performance in different task co-vary across individuals (overall, and within each species)."                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </span></span>
<span><span class="co">#&gt; AP_outliers      "For each task, individuals will be excluded from relevant analyses if they fail to complete the task for three consecutive attempts. Any individual who fails to complete 1 or more cognitive task, will be excluded from the relevant analyses requiring that data, and we will check if including them affects other results."                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </span></span>
<span><span class="co">#&gt; AP_sample_size   "The study will compare four lemur species: ruffed lemur, Coquerel’s sifakas, ring-tailed lemur and mongoose lemur at the Duke Lemur Center. We will test a minimum of 10 and a maximum of 15 individuals for each species based on availability and individual’s willingness to participate at the time of testing."                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </span></span>
<span><span class="co">#&gt; AP_anything_else "Nothing else to pre-register."                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </span></span>
<span><span class="co">#&gt; AP_version       "2.00"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="sample-size">Sample Size<a class="anchor" aria-label="anchor" href="#sample-size"></a>
</h2>
<p>Recent studies into how preregistrations are performed <span class="citation">(Akker et al. 2024)</span> have shown that one of the
most common deviations from a preregistration is a difference in the
planned sample size, and the achieved sample size. This is not
necessarily problematic, as a difference might be only a single
datapoint. Nevertheless, researchers should discuss the deviation, and
evaluate whether the deviation impacts the severity of the test <span class="citation">(Lakens 2024)</span>.</p>
<p>Checking the sample size of a study against the preregistration is
some effort, as the preregistration document needs to be opened, the
correct entry located, and the corresponding text in the manuscript
needs to be identified. Recently, a fully automatic comparison tool, (<a href="https://regcheck.app/" class="external-link">RegCheck</a>) has been created by Jamie
Cummins from the University of Bern, that relies on large language
models and AI where users upload the manuscript, the preregistration,
and receive an automated comparison. We take a slightly different
approach. We retrieve the preregistration from AsPredicted
automatically, and present users with the information about the
preregistered sample size (which is straightforward given the structured
approach of the AsPredicted template). We then recommend users to
compare this information against the method section in the
manuscript.</p>
<div class="section level3">
<h3 id="preregistration-sample-size-plan">Preregistration Sample Size Plan<a class="anchor" aria-label="anchor" href="#preregistration-sample-size-plan"></a>
</h3>
<p>You can access the sample size plan from the results of
<code><a href="../reference/aspredicted_retrieve.html">aspredicted_retrieve()</a></code> under the column name
<code>AP_sample_size</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the sample size section from AsPredicted</span></span>
<span><span class="va">prereg_sample_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">prereg</span><span class="op">$</span><span class="va">AP_sample_size</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># use cat("&gt; ", x = _) with #| results: 'asis' in the code chunk</span></span>
<span><span class="co"># to print out results with markdown quotes</span></span>
<span><span class="va">prereg_sample_size</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"&gt; "</span>, x <span class="op">=</span> <span class="va">_</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>The study will compare four lemur species: ruffed lemur, Coquerel’s
sifakas, ring-tailed lemur and mongoose lemur at the Duke Lemur Center.
We will test a minimum of 10 and a maximum of 15 individuals for each
species based on availability and individual’s willingness to
participate at the time of testing.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="paper-sample-size">Paper Sample size<a class="anchor" aria-label="anchor" href="#paper-sample-size"></a>
</h3>
<p>Now we need to check what the achieved sample size in the paper
is.</p>
<p>To facilitate this comparison, we can retrieve all paragraphs that
contain words such as ‘sample’ or ‘participants’ from the manuscript, in
the hope that this contains the relevant text. A more advanced version
of this tool could attempt to identify the relevant information in the
manuscript with a search for specific words used in the preregistration,
but we also show how AI can be used to identify the related text in the
manuscript.</p>
<p>A papercheck module could automatically print the information from
the preregistration, and possible relevant text from the manuscript. Our
main goal is to increase the ease with which important information from
the preregistration is available to the authors and peer reviewers, and
remind users that they need to discuss deviations from their
preregistration.</p>
<p>It might in addition be useful to retrieve the corresponding section
in the article. A simple attempt to achieve this would be to search for
words related to ‘sample’ or ‘participants’, and retrieve that
paragraph. We can use Papercheck’s inbuilt <code><a href="../reference/search_text.html">search_text()</a></code>
function. For this paper, we see this simple approach works well.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># match "sample" or "# particip..."</span></span>
<span><span class="va">regex_sample</span> <span class="op">&lt;-</span> <span class="st">"\\bsample\\b|\\d+\\s+particip\\w+"</span></span>
<span></span>
<span><span class="co"># get full paragraphs only from the method section</span></span>
<span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">paper</span>, <span class="va">regex_sample</span>, </span>
<span>                      section <span class="op">=</span> <span class="st">"method"</span>, </span>
<span>                      return<span class="op">=</span> <span class="st">"paragraph"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sample</span><span class="op">$</span><span class="va">text</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"&gt; "</span>, x <span class="op">=</span> <span class="va">_</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>We tested 39 lemurs living at the Duke Lemur Center (for subject
information, see Table S1 in the Supplemental Material available
online). We assessed four taxonomic groups: ruffed lemurs (Varecia
species, n = 10), Coquerel’s sifakas (Propithecus coquereli, n = 10),
ringtailed lemurs (Lemur catta, n = 10), and mongoose lemurs (Eulemur
mongoz, n = 9). Ruffed lemurs consisted of both red-ruffed and
black-and-white-ruffed lemurs, but we collapsed analyses across both
groups given their socioecological similarity and classification as
subspecies until recently (Mittermeier et al., 2008). Our sample
included all the individuals available for testing who completed the
battery; two additional subjects (one sifaka and one mongoose lemur)
initiated the battery but failed to reach the predetermined criterion
for inclusion in several tasks or stopped participating over several
days. All tests were voluntary: Lemurs were never deprived of food, had
ad libitum access to water, and could stop participating at any time.
The lemurs had little or no prior experience in relevant cognitive tasks
such as those used here (see Table S1). All behavioral tests were
approved by Duke University’s Institutional Animal Care and Use
Committee .</p>
</blockquote>
<p>We see that the the authors planned to test 10 mongoose lemurs, but
one didn’t feel like participating. This can happen, and it does not
really impact the severity of the test, but the statistical power is
slightly lower than desired, and it is a deviation form the original
plan - both deserve to be discussed.</p>
<div class="center">
<div class="float">
<img src="https://lemur.duke.edu/wordpress/wp-content/uploads/2025/01/12-Mongoose-Lemurs_w.jpg" width="300" alt="Mongoose Lemurs"><div class="figcaption">Mongoose Lemurs</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="llm-comparison">LLM Comparison<a class="anchor" aria-label="anchor" href="#llm-comparison"></a>
</h3>
<p>Alternatively, we can use an LLM to compare the preregistration with
the text in the manuscript. This is more costly (both financially and
ecologically) but it is possible and might work better, given the
flexible ways people discuss sample sizes in manuscripts.</p>
<p>We can use an overinclusive search for any paragraphs that contain
the strings “sample”, “subject” or “particip” from the method and
results sections. We can further narrow this down by including only
paragraphs that contain a number (including the word forms for small
numbers).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">regex_sample</span> <span class="op">&lt;-</span> <span class="st">"subject|sample|particip"</span></span>
<span><span class="va">regex_numbers</span> <span class="op">&lt;-</span> <span class="st">"[0-9]|one|two|three|four|five|six|seven|eight|nine|ten"</span></span>
<span><span class="va">methres</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">paper</span>, <span class="va">regex_sample</span>,</span>
<span>                       section <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"method"</span>, <span class="st">"results"</span><span class="op">)</span>, </span>
<span>                       return <span class="op">=</span> <span class="st">"paragraph"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">regex_numbers</span>, return <span class="op">=</span> <span class="st">"paragraph"</span><span class="op">)</span></span></code></pre></div>
<p>This gives us 15 paragraphs to deal with. We can then send them to an
LLM, and ask which paragraph is most closely related to the text in the
preregistration.</p>
<p>Papercheck has a custom function to send text and a query to
Groq.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">query_template</span> <span class="op">&lt;-</span> <span class="st">"The following text is part of a scientific article. It describes a performed study. Part of this text should correspond to what researchers planned to do. Before data collection, the researchers stated they would:</span></span>
<span><span class="st"></span></span>
<span><span class="st">%s</span></span>
<span><span class="st"></span></span>
<span><span class="st">Your task is to retrieve the sentence(s) in the article that correspond to this plan, and evaluate based on the text in the manuscript whether researchers followed their plan with respect to the sample size. Start your answer with a 'The authors deviated from their preregistration' if there is any deviation."</span></span>
<span></span>
<span><span class="co"># insert prereg text into template</span></span>
<span><span class="va">query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="va">query_template</span>, <span class="va">prereg_sample_size</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># combine all relevant paragraphs</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">methres</span><span class="op">$</span><span class="va">text</span>, collapse <span class="op">=</span> <span class="st">"\n\n"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># run query</span></span>
<span><span class="va">llm_response</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/llm.html">llm</a></span><span class="op">(</span><span class="va">text</span>, <span class="va">query</span>, model <span class="op">=</span> <span class="st">"llama-3.3-70b-versatile"</span><span class="op">)</span></span>
<span><span class="co">#&gt; You have 998 of 1000 requests left (reset in 2m30.301999999s) and 6593 of 12000 tokens left (reset in 27.035s).</span></span>
<span></span>
<span><span class="va">llm_response</span><span class="op">$</span><span class="va">answer</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"&gt; "</span>, x <span class="op">=</span> <span class="va">_</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>The authors deviated from their preregistration in terms of sample
size for one of the species. They planned to test a minimum of 10 and a
maximum of 15 individuals for each species, but they actually tested 9
mongoose lemurs, which is below the planned minimum. For the other
species, the sample sizes were within the planned range: 10 ruffed
lemurs, 10 Coquerel’s sifakas, and 10 ring-tailed lemurs.</p>
</blockquote>
<p>As we see, the LLM does a very good job evaluating whether the
authors adhered to their preregistration in terms of the sample size.
The long-run performance of this automated evaluation needs to be
validated in future research - this is just a proof of principle - but
it has potential for editors who want to automatically check if authors
followed their preregistration, and for meta-scientists who want to
examine preregistration adherence across a large number of papers.
<strong>For such meta-scientific use-cases, however, the code needs to
be extensively validated and error rates should be acceptably low (i.e.,
comparable to human coders).</strong></p>
</div>
</div>
<div class="section level2">
<h2 id="ai-results-always-need-checking">AI Results Always Need Checking!<a class="anchor" aria-label="anchor" href="#ai-results-always-need-checking"></a>
</h2>
<p>The use of AI to interpret deviations is convenient, but
<strong>can’t replace human judgment</strong>. The following article, <a href="https://journals.sagepub.com/doi/10.1177/0956797621991548" class="external-link">Exploring
the Facets of Emotional Episodic Memory: Remembering “What,” “When,” and
“Which”</a> is categorized by the large language model as a deviation
from the preregistration. However, it misses that the authors explicitly
say that Cohort B was not preregistered, and therefore, falling short of
the planned sample size of 60 in that cohort should not be seen as a
deviation from the preregistration. Manually checking the sentences in
the method section that contain the words ‘sample’ or ‘particip…’ reveal
the misclassification by the llm.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">paper</span> <span class="op">&lt;-</span> <span class="va">psychsci</span><span class="op">$</span><span class="va">`0956797621991548`</span></span>
<span><span class="va">links</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aspredicted_links.html">aspredicted_links</a></span><span class="op">(</span><span class="va">paper</span><span class="op">)</span></span>
<span><span class="va">prereg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aspredicted_retrieve.html">aspredicted_retrieve</a></span><span class="op">(</span><span class="va">links</span><span class="op">)</span></span>
<span><span class="co">#&gt; Starting AsPredicted retrieval for 1 files...</span></span>
<span><span class="co">#&gt; * Retrieving info from https://aspredicted.org/p4ci6.pdf...</span></span>
<span><span class="co">#&gt; ...AsPredicted retrieval complete!</span></span>
<span></span>
<span><span class="co">#sample size</span></span>
<span><span class="va">prereg_sample_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">prereg</span><span class="op">$</span><span class="va">AP_sample_size</span><span class="op">)</span></span>
<span><span class="va">prereg_sample_size</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"&gt; "</span>, x <span class="op">=</span> <span class="va">_</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>N = 60. Participants will be recruited from the undergraduate student
population of the University of British Columbia, and will be
compensated with course credit through the Human Subject Pool Sona
system. All participants aged 18-35 will be eligible for participation,
and must be fluent in English (to ensure instruction comprehension).</p>
</blockquote>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># LLM workflow - send potentially relevant paragraphs</span></span>
<span><span class="va">regex_sample</span> <span class="op">&lt;-</span> <span class="st">"subject|sample|particip"</span></span>
<span><span class="va">regex_numbers</span> <span class="op">&lt;-</span> <span class="st">"[0-9]|one|two|three|four|five|six|seven|eight|nine|ten"</span></span>
<span><span class="va">methres</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">paper</span>, <span class="va">regex_sample</span>,</span>
<span>                       section <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"method"</span>, <span class="st">"results"</span><span class="op">)</span>, </span>
<span>                       return <span class="op">=</span> <span class="st">"paragraph"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">regex_numbers</span>, return <span class="op">=</span> <span class="st">"paragraph"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">methres</span><span class="op">$</span><span class="va">text</span>, collapse <span class="op">=</span> <span class="st">"\n\n"</span><span class="op">)</span></span>
<span><span class="va">query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="va">query_template</span>, <span class="va">prereg_sample_size</span><span class="op">)</span></span>
<span><span class="va">llm_response</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/llm.html">llm</a></span><span class="op">(</span><span class="va">text</span>, <span class="va">query</span>, model <span class="op">=</span> <span class="st">"llama-3.3-70b-versatile"</span><span class="op">)</span></span>
<span><span class="co">#&gt; You have 997 of 1000 requests left (reset in 4m17.458999999s) and 3761 of 12000 tokens left (reset in 41.191s).</span></span>
<span></span>
<span><span class="va">llm_response</span><span class="op">$</span><span class="va">answer</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"&gt; "</span>, x <span class="op">=</span> <span class="va">_</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>The authors deviated from their preregistration with respect to the
sample size for cohort B. They had planned to collect data from 60
participants in each cohort, but due to the COVID-19 pandemic, data
collection was interrupted, and they were only able to collect data from
56 participants in cohort B. However, for cohort A, they were able to
collect data from 60 participants as planned, although 3 participants
were excluded from the reported results due to poor performance,
resulting in a final sample size of 57 for cohort A.</p>
</blockquote>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># manual check - no LLM</span></span>
<span><span class="va">regex_sample</span> <span class="op">&lt;-</span> <span class="st">"\\bsample\\b|\\d+\\s+particip\\w+"</span></span>
<span></span>
<span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">paper</span>, <span class="va">regex_sample</span>, </span>
<span>                      section <span class="op">=</span> <span class="st">"method"</span>, </span>
<span>                      return<span class="op">=</span> <span class="st">"paragraph"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sample</span><span class="op">$</span><span class="va">text</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"&gt; "</span>, x <span class="op">=</span> <span class="va">_</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>Through memory, humans are able to relive the past in rich detail.
Our memories are crucial to our sense of self and guide thoughts and
actions. As one important factor, emotion plays a crucial role in the
fidelity of memory, searing in our minds the best and worst of times.
Still, experimental data show that not all the details from emotional
events are preserved in memory. Here, we probed three aspects of memory
for negative and neutral events: what, when, and which. We used a
laboratory analogue of real-world remembering, in which participants
watched videos designed to mimic aspects of an unfolding reallife
experience. Emotion enhanced memory for “what” but reduced memory for
“which.” Critically, emotion also altered memory for “when”;
participants estimated that neutral images occurred later, but negative
images were not associated with such bias. Thus, our results highlight
the myriad effects of emotion on memory. conducted a power analysis
based on Madan et al.’s (2017) second experiment. The effect sizes for
the impact of emotion on “what” (Cohen’s d = 0.44) and “which” (d =
0.52) memory indicated that a sample size of 56 and 41, respectively,
was adequate for detecting an effect on these aspects of memory (α =
.05, 1 -β = .90). Here, we sought to collect data from 60 participants
in each cohort. In cohort A (n = 60; 42 female), the mean age was 20.89
years (SD = 2.94). One participant’s age was excluded from the mean
because they entered an age of “2.” We preregistered the study involving
cohort A We ran a replication study (exact replication), which involved
cohort B, that was not preregistered. In cohort B (n = 56; 44 female),
our replication sample, the mean age was 20.64 years (SD = 1.96). Cohort
B was originally intended to be another 60 participants, but data
collection was interrupted because of the COVID-19 pandemic; we shut
down all laboratory testing on March 13, 2020.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="putting-it-all-together">Putting it All Together<a class="anchor" aria-label="anchor" href="#putting-it-all-together"></a>
</h2>
<p>Papercheck does not yet contain this module, as it is still under
development, but you could <a href="https://scienceverse.github.io/papercheck/articles/creating_modules.html">create
you own local module</a> by using (or improving) the following code:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># save to a file aspredicted_sample.R</span></span>
<span><span class="co"># and use like module_run(paper, "aspredicted_sample.R")</span></span>
<span></span>
<span><span class="va">aspredicted_sample</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">paper</span>, <span class="va">use_llm</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># check paper for AsPredicted links</span></span>
<span>  <span class="va">links</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aspredicted_links.html">aspredicted_links</a></span><span class="op">(</span><span class="va">paper</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">links</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># get prereg data from AsPredicted</span></span>
<span>  <span class="va">prereg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aspredicted_retrieve.html">aspredicted_retrieve</a></span><span class="op">(</span><span class="va">links</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">prereg</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">prereg</span><span class="op">$</span><span class="va">AP_sample_size</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="va">prereg_sample_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">prereg</span><span class="op">$</span><span class="va">AP_sample_size</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># check paper for possible sample paragraphs</span></span>
<span>  <span class="va">regex_sample</span> <span class="op">&lt;-</span> <span class="st">"\\bsample\\b|\\d+\\s+particip\\w+"</span></span>
<span>  <span class="va">sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">paper</span>, <span class="va">regex_sample</span>, </span>
<span>                        section <span class="op">=</span> <span class="st">"method"</span>, </span>
<span>                        return<span class="op">=</span> <span class="st">"paragraph"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># check LLM only if requested</span></span>
<span>  <span class="va">llm_answer</span> <span class="op">&lt;-</span> <span class="st">"LLM not run"</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">use_llm</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">query_template</span> <span class="op">&lt;-</span> <span class="st">"The following text is part of a scientific article. It describes a performed study. Part of this text should correspond to what researchers planned to do. Before data collection, the researchers stated they would:</span></span>
<span><span class="st">  </span></span>
<span><span class="st">  %s</span></span>
<span><span class="st">  </span></span>
<span><span class="st">  Your task is to retrieve the sentence(s) in the article that correspond to this plan, and evaluate based on the text in the manuscript whether researchers followed their plan with respect to the sample size. Start your answer with a 'The authors deviated from their preregistration' if there is any deviation."</span></span>
<span>    </span>
<span>    <span class="va">regex_sample</span> <span class="op">&lt;-</span> <span class="st">"subject|sample|particip"</span></span>
<span>    <span class="va">regex_numbers</span> <span class="op">&lt;-</span> <span class="st">"[0-9]|one|two|three|four|five|six|seven|eight|nine|ten"</span></span>
<span>    <span class="va">methres</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">paper</span>, <span class="va">regex_sample</span>,</span>
<span>                           section <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"method"</span>, <span class="st">"results"</span><span class="op">)</span>, </span>
<span>                           return <span class="op">=</span> <span class="st">"paragraph"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu"><a href="../reference/search_text.html">search_text</a></span><span class="op">(</span><span class="va">regex_numbers</span>, return <span class="op">=</span> <span class="st">"paragraph"</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="va">text</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">methres</span><span class="op">$</span><span class="va">text</span>, collapse <span class="op">=</span> <span class="st">"\n\n"</span><span class="op">)</span></span>
<span>    <span class="va">query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="va">query_template</span>, <span class="va">prereg_sample_size</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># fails gracefully if is API key not available</span></span>
<span>    <span class="va">llm_answer</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="va">llm_response</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/llm.html">llm</a></span><span class="op">(</span><span class="va">text</span>, <span class="va">query</span>, model <span class="op">=</span> <span class="st">"llama-3.3-70b-versatile"</span><span class="op">)</span></span>
<span>      <span class="va">llm_response</span><span class="op">$</span><span class="va">answer</span></span>
<span>    <span class="op">}</span>, error <span class="op">=</span> \<span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span> <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>    </span>
<span>  <span class="co"># print out messages?</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Sample Size Preregistration:\n\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">prereg_sample_size</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n\nSample Size Text in Paper:\n\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">sample</span><span class="op">$</span><span class="va">text</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n\nLLM Assessment:\n\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">llm_answer</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># return structured info</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    table <span class="op">=</span> <span class="va">prereg</span>,</span>
<span>    prereg_sample_size <span class="op">=</span> <span class="va">prereg_sample_size</span>,</span>
<span>    paper_sample_size <span class="op">=</span> <span class="va">sample</span>,</span>
<span>    llm_answer <span class="op">=</span> <span class="va">llm_answer</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Test on the paper from above.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">paper</span> <span class="op">&lt;-</span> <span class="va">psychsci</span><span class="op">$</span><span class="va">`0956797621991548`</span></span>
<span><span class="va">ap</span> <span class="op">&lt;-</span> <span class="fu">aspredicted_sample</span><span class="op">(</span><span class="va">paper</span><span class="op">)</span></span>
<span><span class="co">#&gt; Starting AsPredicted retrieval for 1 files...</span></span>
<span><span class="co">#&gt; * Retrieving info from https://aspredicted.org/p4ci6.pdf...</span></span>
<span><span class="co">#&gt; ...AsPredicted retrieval complete!</span></span></code></pre></div>
<p>Sample Size Preregistration:</p>
<p>N = 60. Participants will be recruited from the undergraduate student
population of the University of British Columbia, and will be
compensated with course credit through the Human Subject Pool Sona
system. All participants aged 18-35 will be eligible for participation,
and must be fluent in English (to ensure instruction comprehension).</p>
<p>Sample Size Text in Paper:</p>
<p>Through memory, humans are able to relive the past in rich detail.
Our memories are crucial to our sense of self and guide thoughts and
actions. As one important factor, emotion plays a crucial role in the
fidelity of memory, searing in our minds the best and worst of times.
Still, experimental data show that not all the details from emotional
events are preserved in memory. Here, we probed three aspects of memory
for negative and neutral events: what, when, and which. We used a
laboratory analogue of real-world remembering, in which participants
watched videos designed to mimic aspects of an unfolding reallife
experience. Emotion enhanced memory for “what” but reduced memory for
“which.” Critically, emotion also altered memory for “when”;
participants estimated that neutral images occurred later, but negative
images were not associated with such bias. Thus, our results highlight
the myriad effects of emotion on memory. conducted a power analysis
based on Madan et al.’s (2017) second experiment. The effect sizes for
the impact of emotion on “what” (Cohen’s d = 0.44) and “which” (d =
0.52) memory indicated that a sample size of 56 and 41, respectively,
was adequate for detecting an effect on these aspects of memory (α =
.05, 1 -β = .90). Here, we sought to collect data from 60 participants
in each cohort. In cohort A (n = 60; 42 female), the mean age was 20.89
years (SD = 2.94). One participant’s age was excluded from the mean
because they entered an age of “2.” We preregistered the study involving
cohort A We ran a replication study (exact replication), which involved
cohort B, that was not preregistered. In cohort B (n = 56; 44 female),
our replication sample, the mean age was 20.64 years (SD = 1.96). Cohort
B was originally intended to be another 60 participants, but data
collection was interrupted because of the COVID-19 pandemic; we shut
down all laboratory testing on March 13, 2020.</p>
<p>LLM Assessment:</p>
<p>LLM not run</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">paper</span> <span class="op">&lt;-</span> <span class="va">psychsci</span><span class="op">$</span><span class="va">`0956797621991548`</span></span>
<span><span class="va">ap_with_llm</span> <span class="op">&lt;-</span> <span class="fu">aspredicted_sample</span><span class="op">(</span><span class="va">paper</span>, use_llm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Starting AsPredicted retrieval for 1 files...</span></span>
<span><span class="co">#&gt; * Retrieving info from https://aspredicted.org/p4ci6.pdf...</span></span>
<span><span class="co">#&gt; ...AsPredicted retrieval complete!</span></span>
<span><span class="co">#&gt; You have 996 of 1000 requests left (reset in 5m43.565999999s) and 868 of 12000 tokens left (reset in 55.659s).</span></span></code></pre></div>
<p>Sample Size Preregistration:</p>
<p>N = 60. Participants will be recruited from the undergraduate student
population of the University of British Columbia, and will be
compensated with course credit through the Human Subject Pool Sona
system. All participants aged 18-35 will be eligible for participation,
and must be fluent in English (to ensure instruction comprehension).</p>
<p>Sample Size Text in Paper:</p>
<p>Through memory, humans are able to relive the past in rich detail.
Our memories are crucial to our sense of self and guide thoughts and
actions. As one important factor, emotion plays a crucial role in the
fidelity of memory, searing in our minds the best and worst of times.
Still, experimental data show that not all the details from emotional
events are preserved in memory. Here, we probed three aspects of memory
for negative and neutral events: what, when, and which. We used a
laboratory analogue of real-world remembering, in which participants
watched videos designed to mimic aspects of an unfolding reallife
experience. Emotion enhanced memory for “what” but reduced memory for
“which.” Critically, emotion also altered memory for “when”;
participants estimated that neutral images occurred later, but negative
images were not associated with such bias. Thus, our results highlight
the myriad effects of emotion on memory. conducted a power analysis
based on Madan et al.’s (2017) second experiment. The effect sizes for
the impact of emotion on “what” (Cohen’s d = 0.44) and “which” (d =
0.52) memory indicated that a sample size of 56 and 41, respectively,
was adequate for detecting an effect on these aspects of memory (α =
.05, 1 -β = .90). Here, we sought to collect data from 60 participants
in each cohort. In cohort A (n = 60; 42 female), the mean age was 20.89
years (SD = 2.94). One participant’s age was excluded from the mean
because they entered an age of “2.” We preregistered the study involving
cohort A We ran a replication study (exact replication), which involved
cohort B, that was not preregistered. In cohort B (n = 56; 44 female),
our replication sample, the mean age was 20.64 years (SD = 1.96). Cohort
B was originally intended to be another 60 participants, but data
collection was interrupted because of the COVID-19 pandemic; we shut
down all laboratory testing on March 13, 2020.</p>
<p>LLM Assessment:</p>
<p>The authors deviated from their preregistration in terms of sample
size for cohort B. They had planned to collect data from 60 participants
in each cohort, but due to the COVID-19 pandemic, data collection was
interrupted, and they were only able to collect data from 56
participants in cohort B. However, for cohort A, they were able to
collect data from 60 participants as planned, although 3 participants
were excluded from the reported results due to poor performance or
experimental error, resulting in a final sample size of 57 for cohort
A.</p>
<p>It fails gracefully if there are no links.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">paper</span> <span class="op">&lt;-</span> <span class="va">psychsci</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">ap_no_links</span> <span class="op">&lt;-</span> <span class="fu">aspredicted_sample</span><span class="op">(</span><span class="va">paper</span><span class="op">)</span></span></code></pre></div>
<p>The extent to which making information from the preregistration more
available will lead to more peers checking for deviations from the
preregistration remains to be seen, but we believe it has potential to
reduce the workload of peer reviewers, and it might remind authors to
discuss deviations from the preregistration.</p>
<p>This code can be substantially improved before we include it as a
built-in Papercheck module, and also needs to be further developed to
work well with multi-study papers that contain multiple
preregistrations. If you are interested in developing this papercheck
module further, or performing such a validation study, do reach out to
us.</p>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-vandenakker_potential_2024" class="csl-entry">
Akker, Olmo R. van den, Marjan Bakker, Marcel A. L. M. van Assen,
Charlotte R. Pennington, Leone Verweij, Mahmoud M. Elsherif, Aline
Claesen, et al. 2024. <span>“The Potential of Preregistration in
Psychology: Assessing Preregistration Producibility and
Preregistration-Study Consistency.”</span> <em>Psychological
Methods</em>, October. <a href="https://doi.org/10.1037/met0000687" class="external-link">https://doi.org/10.1037/met0000687</a>.
</div>
<div id="ref-imai_preregistration_2025" class="csl-entry">
Imai, Taisuke, Séverine Toussaert, Aurélien Baillon, Anna Dreber, Seda
Ertaç, Magnus Johannesson, Levent Neyse, and Marie Claire Villeval.
2025. <em>Pre-Registration and Pre-Analysis Plans in Experimental
Economics</em>. 220. I4R Discussion Paper Series. <a href="https://www.econstor.eu/handle/10419/315047" class="external-link">https://www.econstor.eu/handle/10419/315047</a>.
</div>
<div id="ref-lakens_when_2024" class="csl-entry">
Lakens, Daniël. 2024. <span>“When and How to Deviate from a
Preregistration.”</span> <em>Collabra: Psychology</em> 10 (1): 117094.
<a href="https://doi.org/10.1525/collabra.117094" class="external-link">https://doi.org/10.1525/collabra.117094</a>.
</div>
<div id="ref-spitzer_registered_2023" class="csl-entry">
Spitzer, Lisa, and Stefanie Mueller. 2023. <span>“Registered Report:
Survey on Attitudes and Experiences Regarding Preregistration in
Psychological Research.”</span> <em>PLOS ONE</em> 18 (3): e0281086. <a href="https://doi.org/10.1371/journal.pone.0281086" class="external-link">https://doi.org/10.1371/journal.pone.0281086</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lisa DeBruine, Daniel Lakens.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
