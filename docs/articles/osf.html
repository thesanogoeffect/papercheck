<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Checking OSF Data Repositories • papercheck</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Fira_Code-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Checking OSF Data Repositories">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-160147578-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-160147578-1');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">papercheck</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9045</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/papercheck.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/scienceverse/papercheck/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Checking OSF Data Repositories</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/scienceverse/papercheck/blob/HEAD/vignettes/articles/osf.Rmd" class="external-link"><code>vignettes/articles/osf.Rmd</code></a></small>
      <div class="d-none name"><code>osf.Rmd</code></div>
    </div>

    
    
<p>There are some built-in functions in papercheck for exploring OSF
repositories. You can use these in custom modules.</p>
<p><em>In this blog post we will explain how Papercheck can
automatically check the content of data repositories that are linked to
in a scientific manuscript.</em></p>
<p>There is an increasing awareness of the importance of open science
practices, and widespread support among scientists for open science
practices, such as data and code sharing <span class="citation">(Ferguson et al. 2023)</span>. As data and code sharing
is a relatively new practice, and many scientists lack training in open
science, it is common to see badly documented data repositories. Best
practices exist, such as the <a href="https://www.projecttier.org/tier-protocol/protocol-4-0/" class="external-link">TIER
protocol</a>, but not all researchers might be aware of best
practices.</p>
<p>At a minimum a data repository should contain a README file with
instructions for how to reproduce the results. If data is shared, it
should be stored in a ‘data’ folder, or at least have the word ‘data’ in
the filename. Code or scripts should similarly be shared in a folder
with that name, or at least with the word in the filename. Finally, if
data is shared, there should be a codebook or data dictionary that
explains which variables are in the dataset in order to allow others to
re-use the data. Although it is easy to forget to organize a data
repository well, it is also easy to automatically check. Here we
demonstrate how <a href="https://scienceverse.github.io/papercheck/">Papercheck</a> can
check if a README is present, whether data and/or code are shared, and
if there is a codebook.</p>
<p>Ideally peer reviewers or editors would check the contents of a data
repository. In practice, time constraints mean that no one actually
checks what is in a data repository. Automation can perform some of the
checks that peers might otherwise perform manually. We provide an
illustration of some checks that could be performed. Specifically 1) is
any data that is shared clearly labeled as such, 2) is code that is
shared clearly labeled as such, 3) is there a README file that explains
to potential users which files are shared, where they can be found in
the repository, and how the can be used to reproduce any reported
results, and 4) is there a codebook or data dictionary?</p>
<div class="section level2">
<h2 id="checking-an-osf-repository-with-papercheck">Checking an OSF repository with Papercheck<a class="anchor" aria-label="anchor" href="#checking-an-osf-repository-with-papercheck"></a>
</h2>
<p>We will illustrate the process of checking a data repository by
focusing on projects on the <a href="www.osf.io">Open Science
Framework</a>. For this illustration we use an open access paper
published in Psychological Science that has already been converted to a
papercheck object using GROBID. There are 250 open access papers in the
Papercheck object <code>psychsci</code>; we will choose one for this
example.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># paper to use in this example</span></span>
<span><span class="va">paper</span> <span class="op">&lt;-</span> <span class="va">psychsci</span><span class="op">[[</span><span class="fl">250</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<div class="section level3">
<h3 id="set-up-osf-functions">Set up OSF functions<a class="anchor" aria-label="anchor" href="#set-up-osf-functions"></a>
</h3>
<p>You can only make 100 API requests per hour, unless you authorise
your requests, when you can make 10K requests per day. The OSF functions
in papercheck often make several requests per URL to get all of the
info, so it’s worthwhile setting your PAT. You can authorise them by
creating an OSF token at <a href="https://osf.io/settings/tokens" class="external-link uri">https://osf.io/settings/tokens</a> and including the
following line in your .Renviron file (which you can open using
<code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_r_environ()</a></code>):</p>
<pre><code><span><span class="va">OSF_PAT</span><span class="op">=</span><span class="st">"replace-with-your-token-string"</span></span></code></pre>
<p>The OSF API server is down a lot, so it’s often good to check it
before you run a bunch of OSF functions, we provide the function
<code><a href="../reference/osf_api_check.html">osf_api_check()</a></code> for this. When the server is down, it can
take several seconds to return an error, so scripts where you are
checking many URLs can take a long time before you realise they aren’t
working.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/osf_api_check.html">osf_api_check</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ok"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="find-osf-links">Find OSF Links<a class="anchor" aria-label="anchor" href="#find-osf-links"></a>
</h3>
<p>We start by searching for OSF URLs using the
<code><a href="../reference/search_text.html">search_text()</a></code> function. OSF links can be tricky to find in
PDFs, since they can insert spaces in odd places, and view-only links
that contain a ? are often interpreted as being split across sentences.
This function is our best attempt at catching and fixing them all.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">links</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osf_links.html">osf_links</a></span><span class="op">(</span><span class="va">paper</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">text</th>
<th align="left">section</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">osf.io/hv29w</td>
<td align="left">method</td>
</tr>
<tr class="even">
<td align="left">osf.io/2es6n</td>
<td align="left">method</td>
</tr>
<tr class="odd">
<td align="left">osf.io/jpm5a</td>
<td align="left">method</td>
</tr>
<tr class="even">
<td align="left">osf.io/aux7s</td>
<td align="left">method</td>
</tr>
<tr class="odd">
<td align="left">osf.io/nw3mc</td>
<td align="left">method</td>
</tr>
<tr class="even">
<td align="left">osf.io/ks639</td>
<td align="left">method</td>
</tr>
<tr class="odd">
<td align="left">osf.io/y75nu</td>
<td align="left">method</td>
</tr>
<tr class="even">
<td align="left">OSF.IO/4TYM7</td>
<td align="left">funding</td>
</tr>
<tr class="odd">
<td align="left">OSF.IO/X4T9A</td>
<td align="left">funding</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="retrieve-link-info">Retrieve Link Info<a class="anchor" aria-label="anchor" href="#retrieve-link-info"></a>
</h3>
<p>If valid, the link is processed, and the OSF Application Programming
Interface (API) is used to retrieve whether the link points to a file,
project, or registration. This is achieved through the
<code><a href="../reference/osf_retrieve.html">osf_retrieve()</a></code> function.</p>
<p>This function can take a vector of OSF IDs or URLs, or a table that
contains them. If the IDs aren’t in the first column, you will need to
specify the name of the column. The function will return your table with
added information. (You can quiet the output messages with
<code>verbose(FALSE)</code>.)</p>
<p>The function <code><a href="../reference/osf_retrieve.html">osf_retrieve()</a></code> will also retrieve all child
components, files and folders if you set the argument
<code>recursive = TRUE</code>. If there are duplicate IDs, it will only
get the contents for each item once. If you set the argument
<code>find_project = TRUE</code>, it will also look up the parent
project of any links (but this requires more API calls).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osf_retrieve.html">osf_retrieve</a></span><span class="op">(</span><span class="va">links</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span>, find_project <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Starting OSF retrieval for 9 files...</span></span>
<span><span class="co">#&gt; * Retrieving info from hv29w...</span></span>
<span><span class="co">#&gt; * Retrieving info from 2es6n...</span></span>
<span><span class="co">#&gt; * Retrieving info from jpm5a...</span></span>
<span><span class="co">#&gt; * Retrieving info from aux7s...</span></span>
<span><span class="co">#&gt; * Retrieving info from nw3mc...</span></span>
<span><span class="co">#&gt; * Retrieving info from ks639...</span></span>
<span><span class="co">#&gt; * Retrieving info from y75nu...</span></span>
<span><span class="co">#&gt; * Retrieving info from 4tym7...</span></span>
<span><span class="co">#&gt; * Retrieving info from x4t9a...</span></span>
<span><span class="co">#&gt; ...Main retrieval complete</span></span>
<span><span class="co">#&gt; Starting retrieval of children...</span></span>
<span><span class="co">#&gt; * Retrieving children for x4t9a...</span></span>
<span><span class="co">#&gt; * Retrieving files for x4t9a...</span></span>
<span><span class="co">#&gt; * Retrieving files for 6621454e716cb7048fa45a2a...</span></span>
<span><span class="co">#&gt; * Retrieving files for 6293d1cab59d5f1df8720db5...</span></span>
<span><span class="co">#&gt; * Retrieving files for 6293d1bfbbdcde278f4269ed...</span></span>
<span><span class="co">#&gt; * Retrieving files for 6293d1c5bbdcde278f4269f7...</span></span>
<span><span class="co">#&gt; * Retrieving files for 6339c10031d65306e12de5a2...</span></span>
<span><span class="co">#&gt; ...OSF retrieval complete!</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="10%">
<col width="57%">
<col width="20%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">osf_id</th>
<th align="left">name</th>
<th align="left">osf_type</th>
<th align="left">project</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">hv29w</td>
<td align="left">Kim,Doeller_Prereg_OSF.pdf</td>
<td align="left">files</td>
<td align="left">x4t9a</td>
</tr>
<tr class="even">
<td align="left">2es6n</td>
<td align="left">suppleVideo1_learnSph.mp4</td>
<td align="left">files</td>
<td align="left">x4t9a</td>
</tr>
<tr class="odd">
<td align="left">jpm5a</td>
<td align="left">suppleVideo2_learnPlane.mp4</td>
<td align="left">files</td>
<td align="left">x4t9a</td>
</tr>
<tr class="even">
<td align="left">aux7s</td>
<td align="left">suppleVideo3_objlocSph.mp4</td>
<td align="left">files</td>
<td align="left">x4t9a</td>
</tr>
<tr class="odd">
<td align="left">nw3mc</td>
<td align="left">suppleVideo4_objlocPlane.mp4</td>
<td align="left">files</td>
<td align="left">x4t9a</td>
</tr>
<tr class="even">
<td align="left">ks639</td>
<td align="left">suppleVideo5_triangleSph.mp4</td>
<td align="left">files</td>
<td align="left">x4t9a</td>
</tr>
<tr class="odd">
<td align="left">y75nu</td>
<td align="left">suppleVideo6_trianglePlane.mp4</td>
<td align="left">files</td>
<td align="left">x4t9a</td>
</tr>
<tr class="even">
<td align="left">4tym7</td>
<td align="left">Cognitive maps for a spherical surface</td>
<td align="left">registrations</td>
<td align="left">x4t9a</td>
</tr>
<tr class="odd">
<td align="left">x4t9a</td>
<td align="left">Cognitive maps for a spherical surface</td>
<td align="left">nodes</td>
<td align="left">x4t9a</td>
</tr>
</tbody>
</table>
<p>There are multiple OSF links in this paper, but they are all part of
the same overarching OSF project, with the project ID
<em>x4t9a</em>.</p>
</div>
<div class="section level3">
<h3 id="summarize-contents">Summarize Contents<a class="anchor" aria-label="anchor" href="#summarize-contents"></a>
</h3>
<p>The OSF allows you to categorize components by category, and we can
also determine file types using extensions.</p>
<table class="table">
<colgroup>
<col width="34%">
<col width="52%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left">osf_id</th>
<th align="left">name</th>
<th align="left">filetype</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">hv29w</td>
<td align="left">Kim,Doeller_Prereg_OSF.pdf</td>
<td align="left">text</td>
</tr>
<tr class="even">
<td align="left">2es6n</td>
<td align="left">suppleVideo1_learnSph.mp4</td>
<td align="left">video</td>
</tr>
<tr class="odd">
<td align="left">jpm5a</td>
<td align="left">suppleVideo2_learnPlane.mp4</td>
<td align="left">video</td>
</tr>
<tr class="even">
<td align="left">aux7s</td>
<td align="left">suppleVideo3_objlocSph.mp4</td>
<td align="left">video</td>
</tr>
<tr class="odd">
<td align="left">nw3mc</td>
<td align="left">suppleVideo4_objlocPlane.mp4</td>
<td align="left">video</td>
</tr>
<tr class="even">
<td align="left">ks639</td>
<td align="left">suppleVideo5_triangleSph.mp4</td>
<td align="left">video</td>
</tr>
<tr class="odd">
<td align="left">y75nu</td>
<td align="left">suppleVideo6_trianglePlane.mp4</td>
<td align="left">video</td>
</tr>
<tr class="even">
<td align="left">662145f3716cb7048fa45a58</td>
<td align="left">virtualizerStudy1-main.zip</td>
<td align="left">archive</td>
</tr>
<tr class="odd">
<td align="left">662146fa8df04804d3177e59</td>
<td align="left">ReadMe.txt</td>
<td align="left">text</td>
</tr>
<tr class="even">
<td align="left">64f0aaf4d9f2c905a0d04821</td>
<td align="left">main_analyseTriangleComple_20230423.m</td>
<td align="left">code</td>
</tr>
<tr class="odd">
<td align="left">64f0aaf7f3dcd105dbddd396</td>
<td align="left">main_simulate_objlocTraj.m</td>
<td align="left">code</td>
</tr>
<tr class="even">
<td align="left">64f0aaf9989de605c3dd152a</td>
<td align="left">supple_learningTrajectory.m</td>
<td align="left">code</td>
</tr>
<tr class="odd">
<td align="left">6293d2d5b59d5f1df7720e41</td>
<td align="left">poweranalysis_sph.R</td>
<td align="left">code</td>
</tr>
<tr class="even">
<td align="left">6614017dc053943058b4d41c</td>
<td align="left">supple_sphWithVariousRadius_clean.m</td>
<td align="left">code</td>
</tr>
<tr class="odd">
<td align="left">6293d2d5b59d5f1df0720c66</td>
<td align="left">main_analyseObjLocTest.m</td>
<td align="left">code</td>
</tr>
<tr class="even">
<td align="left">6293d26c86324127ca5b5862</td>
<td align="left">suppleVideo2_learnPlane.mp4</td>
<td align="left">video</td>
</tr>
<tr class="odd">
<td align="left">6293d29eb7e8c726edc2dc38</td>
<td align="left">suppleVideo3_objlocSph.mp4</td>
<td align="left">video</td>
</tr>
<tr class="even">
<td align="left">6293d2a1bbdcde278b42696a</td>
<td align="left">suppleVideo6_trianglePlane.mp4</td>
<td align="left">video</td>
</tr>
<tr class="odd">
<td align="left">6293d271ddbe49279ba215f6</td>
<td align="left">suppleVideo1_learnSph.mp4</td>
<td align="left">video</td>
</tr>
<tr class="even">
<td align="left">6293d275bbdcde278f426b25</td>
<td align="left">suppleVideo4_objlocPlane.mp4</td>
<td align="left">video</td>
</tr>
<tr class="odd">
<td align="left">6293d282ddbe49279aa21548</td>
<td align="left">suppleVideo5_triangleSph.mp4</td>
<td align="left">video</td>
</tr>
<tr class="even">
<td align="left">6293d1e8b59d5f1df7720d4c</td>
<td align="left">suppleMovie_legend.txt</td>
<td align="left">text</td>
</tr>
<tr class="odd">
<td align="left">6293d310b7e8c726ecc2db7d</td>
<td align="left">sumDemograph.csv</td>
<td align="left">data</td>
</tr>
<tr class="even">
<td align="left">6293d30fb7e8c726ecc2db79</td>
<td align="left">rawdata_plane_triangle.csv</td>
<td align="left">data</td>
</tr>
<tr class="odd">
<td align="left">6293d30ebbdcde278f426c49</td>
<td align="left">rawdata_sph_objlocTest.csv</td>
<td align="left">data</td>
</tr>
<tr class="even">
<td align="left">6293d310b59d5f1df3720cf4</td>
<td align="left">rawdata_sph_triangle.csv</td>
<td align="left">data</td>
</tr>
<tr class="odd">
<td align="left">661402d9e65c603b737d9c10</td>
<td align="left">cleanData_combine.mat</td>
<td align="left">code</td>
</tr>
<tr class="even">
<td align="left">661402b4943bee32eadfebdd</td>
<td align="left">pilotData_triangle_combine_clean.csv</td>
<td align="left">data</td>
</tr>
<tr class="odd">
<td align="left">6293d30d86324127d25b5c27</td>
<td align="left">rawdata_plane_objlocIdentity.csv</td>
<td align="left">data</td>
</tr>
<tr class="even">
<td align="left">6293d30d86324127ce5b5a91</td>
<td align="left">rawdata_sph_objlocIdentity.csv</td>
<td align="left">data</td>
</tr>
<tr class="odd">
<td align="left">6293d30db7e8c726edc2dcb7</td>
<td align="left">rawdata_plane_objlocTest.csv</td>
<td align="left">data</td>
</tr>
<tr class="even">
<td align="left">6339c121ec7f3f0704f5fbf0</td>
<td align="left">Kim,Doeller_Prereg_OSF.pdf</td>
<td align="left">text</td>
</tr>
</tbody>
</table>
<p>We can then use this information to determine if, for each file, the
information about the files contains text that makes it easy to
determine what is being shared. A simple regular expression text search
for ‘README’, ‘codebook’, ‘script’, and ‘data’ (in a number of possible
ways that these words can be written) is used to automatically detect
what is shared.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">osf_files_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/summarize_contents.html">summarize_contents</a></span><span class="op">(</span><span class="va">info</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">filetype</th>
<th align="left">best_guess</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Kim,Doeller_Prereg_OSF.pdf</td>
<td align="left">text</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">suppleVideo1_learnSph.mp4</td>
<td align="left">video</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">suppleVideo2_learnPlane.mp4</td>
<td align="left">video</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">suppleVideo3_objlocSph.mp4</td>
<td align="left">video</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">suppleVideo4_objlocPlane.mp4</td>
<td align="left">video</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">suppleVideo5_triangleSph.mp4</td>
<td align="left">video</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">suppleVideo6_trianglePlane.mp4</td>
<td align="left">video</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">virtualizerStudy1-main.zip</td>
<td align="left">archive</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">ReadMe.txt</td>
<td align="left">text</td>
<td align="left">readme</td>
</tr>
<tr class="even">
<td align="left">main_analyseTriangleComple_20230423.m</td>
<td align="left">code</td>
<td align="left">code</td>
</tr>
<tr class="odd">
<td align="left">main_simulate_objlocTraj.m</td>
<td align="left">code</td>
<td align="left">code</td>
</tr>
<tr class="even">
<td align="left">supple_learningTrajectory.m</td>
<td align="left">code</td>
<td align="left">code</td>
</tr>
<tr class="odd">
<td align="left">poweranalysis_sph.R</td>
<td align="left">code</td>
<td align="left">code</td>
</tr>
<tr class="even">
<td align="left">supple_sphWithVariousRadius_clean.m</td>
<td align="left">code</td>
<td align="left">code</td>
</tr>
<tr class="odd">
<td align="left">main_analyseObjLocTest.m</td>
<td align="left">code</td>
<td align="left">code</td>
</tr>
<tr class="even">
<td align="left">suppleVideo2_learnPlane.mp4</td>
<td align="left">video</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">suppleVideo3_objlocSph.mp4</td>
<td align="left">video</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">suppleVideo6_trianglePlane.mp4</td>
<td align="left">video</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">suppleVideo1_learnSph.mp4</td>
<td align="left">video</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">suppleVideo4_objlocPlane.mp4</td>
<td align="left">video</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">suppleVideo5_triangleSph.mp4</td>
<td align="left">video</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">suppleMovie_legend.txt</td>
<td align="left">text</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">sumDemograph.csv</td>
<td align="left">data</td>
<td align="left">data</td>
</tr>
<tr class="even">
<td align="left">rawdata_plane_triangle.csv</td>
<td align="left">data</td>
<td align="left">data</td>
</tr>
<tr class="odd">
<td align="left">rawdata_sph_objlocTest.csv</td>
<td align="left">data</td>
<td align="left">data</td>
</tr>
<tr class="even">
<td align="left">rawdata_sph_triangle.csv</td>
<td align="left">data</td>
<td align="left">data</td>
</tr>
<tr class="odd">
<td align="left">cleanData_combine.mat</td>
<td align="left">code</td>
<td align="left">code</td>
</tr>
<tr class="even">
<td align="left">pilotData_triangle_combine_clean.csv</td>
<td align="left">data</td>
<td align="left">data</td>
</tr>
<tr class="odd">
<td align="left">rawdata_plane_objlocIdentity.csv</td>
<td align="left">data</td>
<td align="left">data</td>
</tr>
<tr class="even">
<td align="left">rawdata_sph_objlocIdentity.csv</td>
<td align="left">data</td>
<td align="left">data</td>
</tr>
<tr class="odd">
<td align="left">rawdata_plane_objlocTest.csv</td>
<td align="left">data</td>
<td align="left">data</td>
</tr>
<tr class="even">
<td align="left">Kim,Doeller_Prereg_OSF.pdf</td>
<td align="left">text</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="report-text">Report Text<a class="anchor" aria-label="anchor" href="#report-text"></a>
</h3>
<p>Finally, we print a report that communicates to the user - for
example, a researcher preparing their manuscript for submission -
whether there are suggestions to improve their data repository. We
provide feedback about whether any of the four categories could be
automatically detected, and if not, provide additional information about
what would have made the automated tool recognize the files of interest.
The output gives a detailed overview of the information it could not
find, alongside a suggestion for how to learn more about best practices
in this domain. If researchers use this Papercheck module before
submission, they can improve the quality of their data repository in
case any information is missing. Papercheck might miss data and code
that is shared, but not clearly named, but by indicating this, users
might realize that the data repository can be improved by more clearly
naming folders and files.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">osf_report</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">summary</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">files</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">summary</span>, <span class="va">osf_type</span> <span class="op">==</span> <span class="st">"files"</span><span class="op">)</span></span>
<span>  <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">files</span>, <span class="va">best_guess</span> <span class="op">==</span> <span class="st">"data"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">code</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">files</span>, <span class="va">best_guess</span> <span class="op">==</span> <span class="st">"code"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">codebook</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">files</span>, <span class="va">best_guess</span> <span class="op">==</span> <span class="st">"codebook"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">readme</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">files</span>, <span class="va">best_guess</span> <span class="op">==</span> <span class="st">"readme"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">traffic_light</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">data</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">code</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">readme</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"red"</span>,</span>
<span>    <span class="va">data</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">|</span> <span class="va">code</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">|</span> <span class="va">readme</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"yellow"</span>,</span>
<span>    <span class="va">data</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">code</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">readme</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"green"</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">data_report</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">data</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"\u26A0\uFE0F There was no data detected. Are you sure you cannot share any of the underlying data? If you did share the data, consider naming the file(s) or file folder with 'data'."</span>,</span>
<span>    <span class="va">data</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"\u2705 Data file(s) were detected. Great job making your research more transparent and reproducible!"</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">codebook_report</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">codebook</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"\u26A0\uFE0F️ No codebooks or data dictionaries were found. Consider adding one to make it easier for others to know which variables you have collected, and how to re-use them. The codebook package in R can automate a substantial part of the generation of a codebook: https://rubenarslan.github.io/codebook/"</span>,</span>
<span>    <span class="va">codebook</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"\u2705 Codebook(s) were detected. Well done!"</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">code_report</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">code</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"\u26A0\uFE0F️ No code files were found. Are you sure there is no code related to this manuscript? If you shared code, consider naming the file or file folder with 'code' or 'script'."</span>,</span>
<span>    <span class="va">code</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"\u2705 Code file(s) were detected. Great job making it easier to  reproduce your results!"</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">readme_report</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">readme</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"\u26A0\uFE0F No README files were identified. A read me is best practice to facilitate re-use. If you have a README, please name it explicitly (e.g., README.txt or _readme.pdf)."</span>,</span>
<span>    <span class="va">readme</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"\u2705 README detected. Great job making it easier to understand how to re-use files in your repository!"</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">report_message</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>    <span class="va">readme_report</span>,</span>
<span>    <span class="va">data_report</span>, </span>
<span>    <span class="va">codebook_report</span>,</span>
<span>    <span class="va">code_report</span>,</span>
<span>    <span class="st">"Learn more about reproducible data practices: https://www.projecttier.org/tier-protocol/"</span>,</span>
<span>    sep <span class="op">=</span> <span class="st">"\n\n"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    traffic_light <span class="op">=</span> <span class="va">traffic_light</span>,</span>
<span>    report <span class="op">=</span> <span class="va">report_message</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">report</span> <span class="op">&lt;-</span> <span class="fu">osf_report</span><span class="op">(</span><span class="va">osf_files_summary</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># print the report into a file</span></span>
<span><span class="fu"><a href="../reference/module_report.html">module_report</a></span><span class="op">(</span><span class="va">report</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2 green">
<h2 class="green" id="section"></h2>
<p>✅ README detected. Great job making it easier to understand how to
re-use files in your repository!</p>
<p>✅ Data file(s) were detected. Great job making your research more
transparent and reproducible!</p>
<p>⚠️️ No codebooks or data dictionaries were found. Consider adding one
to make it easier for others to know which variables you have collected,
and how to re-use them. The codebook package in R can automate a
substantial part of the generation of a codebook: <a href="https://rubenarslan.github.io/codebook/" class="external-link uri">https://rubenarslan.github.io/codebook/</a></p>
<p>✅ Code file(s) were detected. Great job making it easier to
reproduce your results!</p>
<p>Learn more about reproducible data practices: <a href="https://www.projecttier.org/tier-protocol/" class="external-link uri">https://www.projecttier.org/tier-protocol/</a></p>
<div class="section level3">
<h3 id="checking-the-contents-of-files">Checking the Contents of files<a class="anchor" aria-label="anchor" href="#checking-the-contents-of-files"></a>
</h3>
<p>So far we have used Papercheck to automatically check whether certain
types of files exist. But it is also possible to automatically download
files, examine their contents, and provide feedback to users. This can
be useful to examine datasets (e.g., do files contain IP addresses or
other personal information), or code files. We will illustrate the
latter by automatically checking the content of R scripts stored on the
OSF, in repositories that are linked to in a scientific manuscript.</p>
<p>We can check R files for good coding practices that improve
reproducibility. We have created a check that examines 1) whether all
libraries are loaded in one block, instead of throughout the R script,
2) whether relative paths are used that will also work when someone runs
the code on a different computer (e.g.,
<code>data &lt;- read.csv(file='../data/data_study_1.csv')</code> )
instead of fixed paths (e.g.,
<code>data &lt;- read.csv(file='C:/data/data_study_1.csv')</code> ), and
3) whether information is provided about the software used (i.e., the R
version), the version of packages that were used, and properties of the
computer that the analyses were performed on. In R, this can be achieved
by:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; R version 4.4.3 (2025-02-28)</span></span>
<span><span class="co">#&gt; Platform: aarch64-apple-darwin20</span></span>
<span><span class="co">#&gt; Running under: macOS Sequoia 15.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matrix products: default</span></span>
<span><span class="co">#&gt; BLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib </span></span>
<span><span class="co">#&gt; LAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; locale:</span></span>
<span><span class="co">#&gt; [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; time zone: Europe/London</span></span>
<span><span class="co">#&gt; tzcode source: internal</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attached base packages:</span></span>
<span><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; other attached packages:</span></span>
<span><span class="co">#&gt;  [1] lubridate_1.9.4       forcats_1.0.0         stringr_1.5.1        </span></span>
<span><span class="co">#&gt;  [4] dplyr_1.1.4           purrr_1.0.4           readr_2.1.5          </span></span>
<span><span class="co">#&gt;  [7] tidyr_1.3.1           tibble_3.2.1          ggplot2_3.5.1        </span></span>
<span><span class="co">#&gt; [10] tidyverse_2.0.0       papercheck_0.0.0.9045</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; loaded via a namespace (and not attached):</span></span>
<span><span class="co">#&gt;  [1] sass_0.4.9        generics_0.1.3    stringi_1.8.4     httpcode_0.3.0   </span></span>
<span><span class="co">#&gt;  [5] hms_1.1.3         digest_0.6.37     magrittr_2.0.3    evaluate_1.0.3   </span></span>
<span><span class="co">#&gt;  [9] grid_4.4.3        timechange_0.3.0  fastmap_1.2.0     jsonlite_1.9.1   </span></span>
<span><span class="co">#&gt; [13] crul_1.5.0        urltools_1.7.3    httr_1.4.7        scales_1.3.0     </span></span>
<span><span class="co">#&gt; [17] textshaping_0.4.1 jquerylib_0.1.4   cli_3.6.4         rlang_1.1.5      </span></span>
<span><span class="co">#&gt; [21] triebeard_0.4.1   munsell_0.5.1     withr_3.0.2       cachem_1.1.0     </span></span>
<span><span class="co">#&gt; [25] yaml_2.3.10       tools_4.4.3       tzdb_0.5.0        memoise_2.0.1    </span></span>
<span><span class="co">#&gt; [29] colorspace_2.1-1  curl_6.0.1        vctrs_0.6.5       R6_2.6.1         </span></span>
<span><span class="co">#&gt; [33] lifecycle_1.0.4   fs_1.6.5          htmlwidgets_1.6.4 ragg_1.3.3       </span></span>
<span><span class="co">#&gt; [37] osfr_0.2.9        pkgconfig_2.0.3   desc_1.4.3        pkgdown_2.1.1    </span></span>
<span><span class="co">#&gt; [41] pillar_1.10.1     bslib_0.9.0       gtable_0.3.6      Rcpp_1.0.14      </span></span>
<span><span class="co">#&gt; [45] glue_1.8.0        systemfonts_1.1.0 xfun_0.51         tidyselect_1.2.1 </span></span>
<span><span class="co">#&gt; [49] rstudioapi_0.17.1 knitr_1.50        htmltools_0.5.8.1 rmarkdown_2.29   </span></span>
<span><span class="co">#&gt; [53] compiler_4.4.3</span></span></code></pre></div>
<p>As most scientists have not been taught how to code explicitly, it is
common to see scripts that do not adhere to best coding practices. We
are no exception ourselves (e.g., you will not find a sessioninfo.txt
file in our repositories). Although code might be reproducible even if
it takes time to figure out which versions of an R package was used,
which R version was used, and by changing fixed paths, reproducibility
is facilitated if best practices are used. The whole point of automated
checks is to have algorithms that capture expertise make recommendations
that improve how we currently work.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">check_r_files</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">summary</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">r_files</span> <span class="op">&lt;-</span> <span class="va">summary</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">osf_type</span> <span class="op">==</span> <span class="st">"files"</span>,</span>
<span>                  <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"\\.R(md)?"</span>, <span class="va">name</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>abs_report <span class="op">=</span> <span class="cn">NA</span>, </span>
<span>                  pkg_report <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>                  session_report <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">report</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">r_files</span><span class="op">$</span><span class="va">osf_id</span>, \<span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">report</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">r_files</span>, <span class="va">osf_id</span> <span class="op">==</span> <span class="op">!</span><span class="op">!</span><span class="va">id</span><span class="op">)</span></span>
<span>    <span class="co"># Try downloading the R file</span></span>
<span>    <span class="va">file_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"https://osf.io/download/"</span>, <span class="va">id</span><span class="op">)</span></span>
<span>    <span class="va">r_code</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">url</a></span><span class="op">(</span><span class="va">file_url</span><span class="op">)</span>, warn <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>      error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>    </span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">r_code</span><span class="op">)</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># absolute paths</span></span>
<span>    <span class="va">abs_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"[\"\']([A-Z]:|\\/|~)"</span>, <span class="va">r_code</span><span class="op">)</span></span>
<span>    <span class="va">report</span><span class="op">$</span><span class="va">abs</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">abs_path</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"\u2705 No absolute paths were detected"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">abs_path</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"\u274C Absolute paths found at lines: "</span>,</span>
<span>                                   <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">abs_path</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># package loading</span></span>
<span>    <span class="va">pkg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"\\b(library|require)\\("</span>, <span class="va">r_code</span><span class="op">)</span></span>
<span>    <span class="va">report</span><span class="op">$</span><span class="va">pkg</span><span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"\u26A0\uFE0F️ No packages are specified in this script."</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"\u2705 Packages are loaded in a single block."</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">5</span><span class="op">)</span> <span class="op">~</span> <span class="st">"\u2705 Packages are loaded in a single block."</span>,</span>
<span>      .default <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>        <span class="st">"\u274C Packages are loaded in multiple places: lines "</span> ,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">pkg</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># session info </span></span>
<span>    <span class="va">session</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"\\bsession_?[Ii]nfo\\("</span>, <span class="va">r_code</span><span class="op">)</span></span>
<span>    <span class="va">report</span><span class="op">$</span><span class="va">session</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">session</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"\u274C️ No session info was found in this script."</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">session</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>        <span class="st">"\u2705 Session info was found on line"</span>, </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">session</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>    </span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">report</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span>, args <span class="op">=</span> <span class="va">_</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">report</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r_file_results</span> <span class="op">&lt;-</span> <span class="fu">check_r_files</span><span class="op">(</span><span class="va">osf_files_summary</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="27%">
<col width="10%">
<col width="61%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">report</th>
<th align="left">feedback</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">poweranalysis_sph.R</td>
<td align="left">abs</td>
<td align="left">✅ No absolute paths were detected</td>
</tr>
<tr class="even">
<td align="left">poweranalysis_sph.R</td>
<td align="left">pkg</td>
<td align="left">✅ Packages are loaded in a single block.</td>
</tr>
<tr class="odd">
<td align="left">poweranalysis_sph.R</td>
<td align="left">session</td>
<td align="left">❌️ No session info was found in this script.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="put-it-all-together">Put it All Together<a class="anchor" aria-label="anchor" href="#put-it-all-together"></a>
</h2>
<p>Let’s put everything together in one block of code, and perform all
automated checks for another open access paper in Psychological
Science.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add this and the custom functions to a file called osf_file_check.R</span></span>
<span></span>
<span><span class="va">osf_file_check</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">paper</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">links</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osf_links.html">osf_links</a></span><span class="op">(</span><span class="va">paper</span><span class="op">)</span></span>
<span>  <span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osf_retrieve.html">osf_retrieve</a></span><span class="op">(</span><span class="va">links</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">osf_files_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/summarize_contents.html">summarize_contents</a></span><span class="op">(</span><span class="va">info</span><span class="op">)</span></span>
<span>  <span class="va">report</span> <span class="op">&lt;-</span> <span class="fu">osf_report</span><span class="op">(</span><span class="va">osf_files_summary</span><span class="op">)</span></span>
<span>  <span class="va">r_file_results</span> <span class="op">&lt;-</span> <span class="fu">check_r_files</span><span class="op">(</span><span class="va">osf_files_summary</span><span class="op">)</span>  </span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    traffic_light <span class="op">=</span> <span class="va">report</span><span class="op">$</span><span class="va">traffic_light</span>,</span>
<span>    table <span class="op">=</span> <span class="va">r_file_results</span>,</span>
<span>    report <span class="op">=</span> <span class="va">report</span><span class="op">$</span><span class="va">report</span>,</span>
<span>    summary <span class="op">=</span> <span class="va">osf_files_summary</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">module_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/module_run.html">module_run</a></span><span class="op">(</span><span class="va">psychsci</span><span class="op">$</span><span class="va">`0956797620955209`</span>, <span class="st">"osf_file_check.R"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Starting OSF retrieval for 1 files...</span></span>
<span><span class="co">#&gt; * Retrieving info from k2dbf...</span></span>
<span><span class="co">#&gt; ...Main retrieval complete</span></span>
<span><span class="co">#&gt; Starting retrieval of children...</span></span>
<span><span class="co">#&gt; * Retrieving children for k2dbf...</span></span>
<span><span class="co">#&gt; * Retrieving files for k2dbf...</span></span>
<span><span class="co">#&gt; * Retrieving files for 5e344fb4f6631d013e5a48c9...</span></span>
<span><span class="co">#&gt; ...OSF retrieval complete!</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/module_report.html">module_report</a></span><span class="op">(</span><span class="va">module_results</span>, header <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="section level4 yellow">
<h4 class="yellow" id="osf-file-check">OSF File Check<a class="anchor" aria-label="anchor" href="#osf-file-check"></a>
</h4>
<p>⚠️ No README files were identified. A read me is best practice to
facilitate re-use. If you have a README, please name it explicitly
(e.g., README.txt or _readme.pdf).</p>
<p>✅ Data file(s) were detected. Great job making your research more
transparent and reproducible!</p>
<p>⚠️️ No codebooks or data dictionaries were found. Consider adding one
to make it easier for others to know which variables you have collected,
and how to re-use them. The codebook package in R can automate a
substantial part of the generation of a codebook: <a href="https://rubenarslan.github.io/codebook/" class="external-link uri">https://rubenarslan.github.io/codebook/</a></p>
<p>✅ Code file(s) were detected. Great job making it easier to
reproduce your results!</p>
<p>Learn more about reproducible data practices: <a href="https://www.projecttier.org/tier-protocol/" class="external-link uri">https://www.projecttier.org/tier-protocol/</a></p>
<table class="table">
<colgroup>
<col width="4%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="46%">
<col width="4%">
<col width="3%">
<col width="2%">
<col width="3%">
<col width="4%">
<col width="3%">
<col width="3%">
<col width="2%">
<col width="2%">
<col width="4%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="left">text</th>
<th align="left">section</th>
<th align="right">div</th>
<th align="right">p</th>
<th align="right">s</th>
<th align="left">osf_id</th>
<th align="left">name</th>
<th align="left">description</th>
<th align="left">osf_type</th>
<th align="left">public</th>
<th align="left">category</th>
<th align="left">registration</th>
<th align="left">preprint</th>
<th align="left">is_readme</th>
<th align="left">is_data</th>
<th align="left">is_code</th>
<th align="left">is_codebook</th>
<th align="left">best_guess</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">osf.io/k2dbf</td>
<td align="left">method</td>
<td align="right">8</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">k2dbf</td>
<td align="left">Preregistered replication of “Sick body, vigilant mind:
The biological immune system activates the behavioral immune
system”</td>
<td align="left"></td>
<td align="left">nodes</td>
<td align="left">TRUE</td>
<td align="left">project</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">osf.io/k2dbf</td>
<td align="left">funding</td>
<td align="right">14</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">k2dbf</td>
<td align="left">Preregistered replication of “Sick body, vigilant mind:
The biological immune system activates the behavioral immune
system”</td>
<td align="left"></td>
<td align="left">nodes</td>
<td align="left">TRUE</td>
<td align="left">project</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">osf.io/k2dbf</td>
<td align="left">funding</td>
<td align="right">14</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">k2dbf</td>
<td align="left">Preregistered replication of “Sick body, vigilant mind:
The biological immune system activates the behavioral immune
system”</td>
<td align="left"></td>
<td align="left">nodes</td>
<td align="left">TRUE</td>
<td align="left">project</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>Showing 3 of 3 rows</p>
</div>
</div>
<div class="section level2">
<h2 id="future-developments">Future Developments<a class="anchor" aria-label="anchor" href="#future-developments"></a>
</h2>
<p>We have demonstrated a rather basic workflow that can automatically
check files stored on the Open Science Framework, and all the checks
demonstrated here can be made more accurate or complete. At the same
time, even the current simple automatic checks might already facilitate
re-use by including information (e.g., a README) and improving how files
are named. There are many obvious ways to expand these automated checks.
First, the example can be expanded to other commonly used data
repositories, such as GitHub, Dataverse, etc. Second, the checks can be
expanded beyond the properties that are automatically checked now. If
you are an expert on code reproducibility or data re-use and would like
to add checks, do reach out to us. Third, we can check for other types
of files. For example, we are collaborating with Attila Simko who is
interested in identifying the files required to <a href="https://arxiv.org/abs/2210.11146" class="external-link">reproduce deep learning models
in the medical imaging literature</a>. We believe there will be many
such field-dependent checks that can be automated, as the ability to
automatically examine and/or retrieve files that are linked to in a
paper should be useful for a large range of use-cases.</p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-ferguson_survey_2023" class="csl-entry">
Ferguson, Joel, Rebecca Littman, Garret Christensen, Elizabeth Levy
Paluck, Nicholas Swanson, Zenan Wang, Edward Miguel, David Birke, and
John-Henry Pezzuto. 2023. <span>“Survey of Open Science Practices and
Attitudes in the Social Sciences.”</span> <em>Nature Communications</em>
14 (11): 5401. <a href="https://doi.org/10.1038/s41467-023-41111-1" class="external-link">https://doi.org/10.1038/s41467-023-41111-1</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lisa DeBruine, Daniel Lakens.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
